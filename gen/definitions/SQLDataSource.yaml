name: SQLDataSource
description: <p>An SQL data source the configuration to establish a direct connection
  to a database instance on a remote data server. When configured, a DataPower service
  can dynamically run database operations, such as <tt>SELECT</tt> and <tt>INSERT</tt>
  , on the remote database.</p><p>An SQL data source is used by SQL actions in processing
  policies. The SQL action retrieves the data for further processing. Conversely,
  the processing policy can store the processed data in the configured database instance.</p><p>When
  you configure an SQL data source, you can define valid configuration parameters
  for your data server connection. Configuration parameters modify the behavior of
  the services that run with a data server. Some configuration parameters in the configuration
  file are informational and define characteristics about the environment. These configuration
  parameters cannot be modified.</p>
cli_alias: sql-source
cmd_group: sql
rest_endpoint: /mgmt/config/{domain}/SQLDataSource
attributes:
- name: Id
  tf_name: id
  path: name
  type: String
  required: true
  test_value: '"ResTestSQLDataSource"'
  test_expect_ds: '"AccTest_SQLDataSource"'
  example: SQLDataSourceName
  description: Name of the object. Must be unique among object types in application
    domain.
  string_patterns:
  - ^[a-zA-Z0-9_-]+$
  string_min_length: 1
  string_max_length: 128
- name: AppDomain
  tf_name: app_domain
  type: String
  required: true
  example: test_domain
  description: The name of the application domain the object belongs to
  string_patterns:
  - ^[a-zA-Z0-9_-]+$
  string_min_length: 1
  string_max_length: 128
- name: UserSummary
  type: String
  description: Comments
  cli_alias: summary
- name: Database
  type: String
  enum:
  - DB2
  - Oracle
  - Sybase
  - MSSQLServer
  - DB2v9
  - IMS
  required: true
  example: Oracle
  description: Database type
  cli_alias: db
- name: Username
  type: String
  required: true
  example: username
  description: Specify the user to establish the connection to the SQL database. The
    server maintains this information.
  cli_alias: username
- name: PasswordAlias
  type: String
  required: true
  reference_to: PasswordAlias
  test_value: '"AccTest_PasswordAlias"'
  test_bed_value: datapower_password_alias.acc_test.id
  description: Specify the password alias of the user password to establish connection
    with the SQL database. The password alias looks up the password for the user.
    The server maintains the password.
  cli_alias: password-alias
  required_when:
  - evaluation: logical-and
    conditions:
    - evaluation: property-equals
      attribute: Password
      value:
      - ''
    - evaluation: logical-not
      conditions:
      - evaluation: logical-and
        conditions:
        - evaluation: property-equals
          attribute: Database
          value:
          - DB2
        - evaluation: property-does-not-equal
          attribute: EncryptionMethodDB2
          value:
          - NoEncryption
        - evaluation: property-does-not-equal
          attribute: KeystoreRef
          value:
          - ''
  ignored_when:
  - evaluation: logical-and
    conditions:
    - evaluation: property-equals
      attribute: Database
      value:
      - DB2
    - evaluation: property-does-not-equal
      attribute: EncryptionMethodDB2
      value:
      - NoEncryption
    - evaluation: property-does-not-equal
      attribute: KeystoreRef
      value:
      - ''
- name: DataSourceID
  type: String
  required: true
  description: Specify the identifier of the data source. The terminology differs
    by vendor. <ul><li><b>Db2</b> - The IBM Db2 database alias.</li><li><b>IMS</b>
    - The name of the IBM IMS data store.</li><li><b>Microsoft SQL Server</b> - The
    name of the Microsoft SQL Server data source.</li><li><b>Oracle</b> - The Oracle
    system identifier (SID) or service name.</li><li><b>Sybase</b> - The name of the
    Sybase database.</li></ul>
  example: datasource_id
  cli_alias: id
- name: DataSourceHost
  type: String
  required: true
  example: datasource.host
  description: Data source host
  cli_alias: host
- name: DataSourcePort
  type: Int64
  required: true
  example: 1488
  description: Data source port
  cli_alias: port
- name: LimitReturnedData
  type: Bool
  default: false
  description: Specify whether to limit the data from a <b>SELECT</b> statement. By
    default, the response size is not limited.
  cli_alias: limit
- name: LimitReturnedDataSize
  type: Int64
  minimum: 1
  maximum: 65535
  default: 128
  description: Specify the limit in KB on returned data from a <b>SELECT</b> statement.
    The default value is 128.
  cli_alias: limit-size
  ignored_when:
  - evaluation: property-does-not-equal
    attribute: LimitReturnedData
    value:
    - 'on'
- name: SQLDataSourceConfigNVPairs
  type: List
  element_type: DmSQLDataSourceConfigNVPair
  description: Specify configuration parameters for the data server connection. Configuration
    parameters modify the behavior of the services that run with a data server. Some
    parameters in the configuration file are informational and define characteristics
    about the environment. These parameters cannot be modified.
  cli_alias: sql-config-param
- name: MaxConnection
  type: Int64
  minimum: 1
  maximum: 65535
  required: true
  default: 10
  description: Specify the maximum number of concurrent SQL connections. Enter a value
    in the range 1 - 65535. The default value is 10.
  cli_alias: maximum-connections
- name: OracleDataSourceType
  type: String
  enum:
  - SID
  - ServiceName
  default: SID
  description: Data source type - Oracle
  cli_alias: oracle-datasource-type
  required_when:
  - evaluation: property-equals
    attribute: Database
    value:
    - Oracle
  ignored_when:
  - evaluation: property-does-not-equal
    attribute: Database
    value:
    - Oracle
- name: ConnectTimeout
  type: Int64
  required: true
  default: 15
  description: <p>Specify the duration in seconds to wait to establish a connection
    to the data server. Enter a value in the range 0 - 4294967295. The value of 0
    disables the timeout. The default value is 15.</p><p>A new connection is the initial
    connection and each new connection from the connection pool. Reuse of a connection
    from the connection pool is not considered establishing a new connection.</p><p>The
    connection timeout must be less than the query timeout. With this configuration,
    the initial query has time to establish the connection to the data server.</p>
  cli_alias: connect-timeout
- name: QueryTimeout
  type: Int64
  required: true
  example: 30
  description: Specify the duration in seconds to wait for an SQL request to complete.
    Enter a value in the range 0 - 4294967295. The default value is 0, which uses
    the standard timeout in the user agent. <p>The duration is from when the service
    sends the request to when the service receives the results.</p><p>The query timeout
    must be greater than the connection timeout. With this configuration, the initial
    query has time to establish the connection to the remote data server.</p>
  cli_alias: query-timeout
- name: IdleTimeout
  type: Int64
  required: true
  default: 180
  description: Specify the duration that a connection from the connection pool can
    remain idle before the connection is released. Enter a value in the range 0 -
    4294967295. The default value is 180. The value of 0 disables the timer.
  cli_alias: idle-timeout
- name: LoadBalancing
  type: Bool
  default: false
  description: Specify whether to enable Db2 workload balancing and automatic client
    reroute for Db2 for z/OS. <p>When enabled, this feature set uses the z/OS Sysplex
    Distributor for real-time load distribution of SQL calls to the sysplex-aware
    Db2 instance.</p><p>When enabled, you must specify the sysplex DVIPA as the data
    source host.</p>
  cli_alias: load-balancing
  ignored_when:
  - evaluation: property-does-not-equal
    attribute: Database
    value:
    - DB2
- name: EncryptionMethodMSSQL
  type: String
  enum:
  - NoEncryption
  - SSL
  - RequestSSL
  - LoginSSL
  default: NoEncryption
  description: Specify the TLS encryption method for a Microsoft SQL Server database.
    When the server does not support the specified encryption method, the connection
    fails.
  cli_alias: mssql-encryption-method
  required_when:
  - evaluation: property-equals
    attribute: Database
    value:
    - MSSQLServer
  ignored_when:
  - evaluation: property-does-not-equal
    attribute: Database
    value:
    - MSSQLServer
- name: EncryptionMethodOracle
  type: String
  enum:
  - NoEncryption
  - SSL
  default: NoEncryption
  description: Specify the TLS encryption method for an Oracle database. When the
    server does not support the specified encryption method, the connection fails.
    The default behavior is to not encrypt or decrypt data.
  cli_alias: oracle-encryption-method
  required_when:
  - evaluation: property-equals
    attribute: Database
    value:
    - Oracle
  ignored_when:
  - evaluation: property-does-not-equal
    attribute: Database
    value:
    - Oracle
- name: EncryptionMethodDB2
  type: String
  enum:
  - NoEncryption
  - SSL
  default: NoEncryption
  description: Specify the TLS encryption method for an IBM Db2 database. When the
    server does not support the specified encryption method, the connection fails.
    The default behavior is to not encrypt or decrypt data.
  cli_alias: db2-encryption-method
  required_when:
  - evaluation: property-equals
    attribute: Database
    value:
    - DB2
  ignored_when:
  - evaluation: property-does-not-equal
    attribute: Database
    value:
    - DB2
- name: TruststoreRef
  type: String
  reference_to: CryptoValCred
  description: Truststore
  cli_alias: truststore
  required_when:
  - evaluation: logical-or
    conditions:
    - evaluation: logical-and
      conditions:
      - evaluation: property-equals
        attribute: Database
        value:
        - Oracle
      - evaluation: property-does-not-equal
        attribute: EncryptionMethodOracle
        value:
        - NoEncryption
    - evaluation: logical-and
      conditions:
      - evaluation: property-equals
        attribute: Database
        value:
        - MSSQLServer
      - evaluation: property-does-not-equal
        attribute: EncryptionMethodMSSQL
        value:
        - NoEncryption
    - evaluation: logical-and
      conditions:
      - evaluation: property-equals
        attribute: Database
        value:
        - DB2
      - evaluation: property-does-not-equal
        attribute: EncryptionMethodDB2
        value:
        - NoEncryption
  ignored_when:
  - evaluation: logical-and
    conditions:
    - evaluation: logical-or
      conditions:
      - evaluation: property-does-not-equal
        attribute: Database
        value:
        - Oracle
      - evaluation: property-equals
        attribute: EncryptionMethodOracle
        value:
        - NoEncryption
    - evaluation: logical-or
      conditions:
      - evaluation: property-does-not-equal
        attribute: Database
        value:
        - MSSQLServer
      - evaluation: property-equals
        attribute: EncryptionMethodMSSQL
        value:
        - NoEncryption
    - evaluation: logical-or
      conditions:
      - evaluation: property-does-not-equal
        attribute: Database
        value:
        - DB2
      - evaluation: property-equals
        attribute: EncryptionMethodDB2
        value:
        - NoEncryption
- name: ValidateServerCertificate
  type: String
  enum:
  - Disabled
  - Enabled
  default: Enabled
  description: Validate server certificate
  cli_alias: validate-server-certificate
  ignored_when:
  - evaluation: logical-and
    conditions:
    - evaluation: logical-or
      conditions:
      - evaluation: property-does-not-equal
        attribute: Database
        value:
        - Oracle
      - evaluation: property-equals
        attribute: EncryptionMethodOracle
        value:
        - NoEncryption
    - evaluation: logical-or
      conditions:
      - evaluation: property-does-not-equal
        attribute: Database
        value:
        - MSSQLServer
      - evaluation: property-equals
        attribute: EncryptionMethodMSSQL
        value:
        - NoEncryption
    - evaluation: logical-or
      conditions:
      - evaluation: property-does-not-equal
        attribute: Database
        value:
        - DB2
      - evaluation: property-equals
        attribute: EncryptionMethodDB2
        value:
        - NoEncryption
- name: HostNameInCertificate
  type: String
  description: Specify the hostname that the certificate must contain for hostname
    validation. Hostname validation provides extra security against man-in-the-middle
    (MITM) attacks by ensuring that the connection is to the requested server.
  cli_alias: hostname-in-certificate
  ignored_when:
  - evaluation: logical-and
    conditions:
    - evaluation: logical-or
      conditions:
      - evaluation: property-does-not-equal
        attribute: Database
        value:
        - Oracle
      - evaluation: property-equals
        attribute: EncryptionMethodOracle
        value:
        - NoEncryption
    - evaluation: logical-or
      conditions:
      - evaluation: property-does-not-equal
        attribute: Database
        value:
        - MSSQLServer
      - evaluation: property-equals
        attribute: EncryptionMethodMSSQL
        value:
        - NoEncryption
- name: ValidateHostName
  type: Bool
  default: true
  description: Specify whether to validate the hostname against the hostname in the
    server certificate. Hostname validate uses the value of the data source host.
    Hostname validation provides extra security against man-in-the-middle (MITM) attacks
    by ensuring that the connection is to the requested server.
  cli_alias: validate-host-name
  ignored_when:
  - evaluation: logical-or
    conditions:
    - evaluation: property-does-not-equal
      attribute: Database
      value:
      - DB2
    - evaluation: property-equals
      attribute: EncryptionMethodDB2
      value:
      - NoEncryption
- name: KeystoreRef
  type: String
  reference_to: CryptoIdentCred
  description: Keystore
  cli_alias: keystore
  ignored_when:
  - evaluation: logical-and
    conditions:
    - evaluation: logical-or
      conditions:
      - evaluation: property-does-not-equal
        attribute: Database
        value:
        - Oracle
      - evaluation: property-equals
        attribute: EncryptionMethodOracle
        value:
        - NoEncryption
    - evaluation: logical-or
      conditions:
      - evaluation: property-does-not-equal
        attribute: Database
        value:
        - MSSQLServer
      - evaluation: property-equals
        attribute: EncryptionMethodMSSQL
        value:
        - NoEncryption
    - evaluation: logical-or
      conditions:
      - evaluation: property-does-not-equal
        attribute: Database
        value:
        - DB2
      - evaluation: property-equals
        attribute: EncryptionMethodDB2
        value:
        - NoEncryption
