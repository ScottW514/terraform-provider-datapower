name: Domain
description: An application domain contains the resources that support DataPower services.
  The DataPower Gateway supports multiple domains. Domains can share read access to
  files in their <tt>local:</tt> directory. All domains share the contents of the
  <tt>store:</tt> directory. <p>After a user logs in to a domain, everything the user
  does applies to only this domain.</p><p>Except for the <tt>default</tt> domain,
  all domains can be restarted independently. For the <tt>default</tt> domain, you
  must restart the DataPower Gateway. When an domain or the DataPower Gateway is restarted,
  the persisted configuration is used. The persisted configuration can differ from
  the running configuration.</p><p>The configuration of a domain can be locally stored
  or can be retrieved from a remote server. The use of a remote configuration file
  enables centralized management of domains.</p>
cli_alias: domain
rest_endpoint: /mgmt/config/default/Domain/{domain}
put_create: true
actions:
- name: quiesce
- name: restart
  body: '{"RestartDomain": {"Domain": "{domain}"}}'
attributes:
- name: AppDomain
  tf_name: app_domain
  type: String
  required: true
  test_value: '"ResTestDomain"'
  test_expect_ds: '"AccTest_Domain"'
  example: DomainName
  description: The name of the application domain the object belongs to
  string_patterns:
  - ^[a-zA-Z0-9_-]+$
  string_min_length: 1
  string_max_length: 128
- name: UserSummary
  type: String
  description: Comments
  cli_alias: summary
- name: ConfigDir
  type: String
  computed: true
  description: Specify where the configuration file for this domain is stored. This
    property is read-only because it is configured in domain settings.
  ignored_when:
  - evaluation: property-value-not-in-list
    attribute: ConfigMode
    value:
    - local
- name: NeighborDomain
  type: List
  reference_to: Domain
  element_type: String
  list_default:
  - default
  description: Specify which domains have their <tt>local:</tt> directory visible
    to this domain. <p>References to visible domains are explicit, not bidirectional.
    If domain <tt>domainB</tt> is made visible to domain <tt>domainA</tt> , the following
    conditions apply.</p><ul><li>Domain <tt>domainA</tt> has read-only access to the
    <tt>local:</tt> directory of domain <tt>domainB</tt> .</li><li>Domain <tt>domainB</tt>
    cannot see domain <tt>domainA</tt> .</li></ul><p>In this case, you cannot make
    domain <tt>domainA</tt> visible to domain <tt>domainB</tt> . References to visible
    domains cannot be circular.</p>
  cli_alias: visible-domain
- name: DomainUser
  type: List
  reference_to: User
  element_type: String
  description: Specify the set of CLI users who can access this domain. These users
    can log into this domain through the CLI. This setting can be superseded by an
    existing access policy of the user.
  cli_alias: domain-user
  ignored_when:
  - evaluation: logical-true
- name: FileMap
  dm_type: DmDomainFileMap
  description: Specify the file permissions to apply to the <tt>local:</tt> directory.
    When access permissions are defined and with role-based management, users are
    granted the lesser privilege.
  cli_alias: file-permissions
- name: MonitoringMap
  dm_type: DmDomainMonitoringMap
  description: 'File-monitoring of the local: directory'
  cli_alias: file-monitoring
- name: ConfigMode
  type: String
  enum:
  - local
  - import
  default: local
  description: Configuration mode
  cli_alias: config-mode
- name: ImportURL
  type: String
  description: Import URL
  cli_alias: import-url
  required_when:
  - evaluation: property-value-in-list
    attribute: ConfigMode
    value:
    - import
  ignored_when:
  - evaluation: logical-true
- name: ImportFormat
  type: String
  enum:
  - ZIP
  - XML
  default: ZIP
  description: Import format
  cli_alias: import-format
  required_when:
  - evaluation: property-value-in-list
    attribute: ConfigMode
    value:
    - import
  ignored_when:
  - evaluation: logical-true
- name: DeploymentPolicy
  type: String
  reference_to: ConfigDeploymentPolicy
  description: Deployment policy
  cli_alias: deployment-policy
  ignored_when:
  - evaluation: property-value-not-in-list
    attribute: ConfigMode
    value:
    - import
- name: DeploymentPolicyParameters
  type: String
  reference_to: DeploymentPolicyParametersBinding
  description: Deployment policy variables
  cli_alias: deployment-policy-variables
  ignored_when:
  - evaluation: property-value-not-in-list
    attribute: ConfigMode
    value:
    - import
- name: LocalIPRewrite
  type: Bool
  default: true
  description: Specify whether to rewrite local IP addresses during import. When enabled,
    local IP addresses in the import package are rewritten to match the local IP address
    on the DataPower Gateway. In other words, a service that binds to <tt>eth10</tt>
    in the import package is rewritten to bind to the local IP address of <tt>eth10</tt>
    on the DataPower Gateway.
  cli_alias: local-ip-rewrite
  required_when:
  - evaluation: property-value-in-list
    attribute: ConfigMode
    value:
    - import
  ignored_when:
  - evaluation: logical-true
- name: MaxChkpoints
  type: Int64
  minimum: 1
  maximum: 5
  default: 3
  description: Checkpoint limit
  cli_alias: maxchkpoints
- name: ConfigPermissionsMode
  type: String
  enum:
  - scope-domain
  - global-profile
  - specific-profile
  default: scope-domain
  description: Configuration permissions mode
  cli_alias: config-permissions-mode
- name: ConfigPermissionsProfile
  type: String
  reference_to: AccessProfile
  description: Global permissions profile
  cli_alias: config-permissions-profile
  required_when:
  - evaluation: property-value-in-list
    attribute: ConfigPermissionsMode
    value:
    - global-profile
  ignored_when:
  - evaluation: property-value-not-in-list
    attribute: ConfigPermissionsMode
    value:
    - global-profile
