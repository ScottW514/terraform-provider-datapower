name: TAM
description: '<p>A DataPower Gateway can support multiple IBM Security Access Manager
  registry types: LDAP or Microsoft Active Directory. Support for the registry type
  is established for each Access Manager client that starts according to its configuration.</p>'
cli_alias: tam
cmd_group: tam
rest_endpoint: /mgmt/config/{domain}/TAM
skip_test: true
attributes:
- name: Id
  tf_name: id
  path: name
  type: String
  required: true
  test_value: '"ResTestTAM"'
  test_expect_ds: '"AccTest_TAM"'
  example: TAMName
  description: Name of the object. Must be unique among object types in application
    domain.
  string_patterns:
  - ^[a-zA-Z0-9_-]+$
  string_min_length: 1
  string_max_length: 128
- name: AppDomain
  tf_name: app_domain
  type: String
  required: true
  example: test_domain
  description: The name of the application domain the object belongs to
  string_patterns:
  - ^[a-zA-Z0-9_-]+$
  string_min_length: 1
  string_max_length: 128
- name: UserSummary
  type: String
  description: Enter the descriptive summary for the configuration.
  cli_alias: summary
- name: ADUseAD
  type: Bool
  default: false
  description: <p>Select whether the Access Manager client uses Microsoft Active Directory
    instead of LDAP as the registry. The default registry for an Access Manager deployment
    is LDAP. This selection will cause this client to use Microsoft Active Directory.
    Active Directory type is not supported after ISAM 7.0 .</p><p><b>Note:</b> The
    type of registry that an Access Manager deployment supports is determined by the
    configuration of the Access Manager server. The registry that you define in this
    configuration is for a client and must match the registry of the server.</p>
  cli_alias: ad-use-ad
  required_when:
  - evaluation: logical-and
    conditions:
    - evaluation: property-does-not-equal
      attribute: TAMVersion
      value:
      - v801
    - evaluation: property-does-not-equal
      attribute: TAMVersion
      value:
      - v901
    - evaluation: property-does-not-equal
      attribute: TAMVersion
      value:
      - v903
    - evaluation: property-does-not-equal
      attribute: TAMVersion
      value:
      - v1005
  ignored_when:
  - evaluation: logical-and
    conditions:
    - evaluation: property-equals
      attribute: TAMVersion
      value:
      - v801
    - evaluation: property-does-not-equal
      attribute: TAMVersion
      value:
      - v901
    - evaluation: property-does-not-equal
      attribute: TAMVersion
      value:
      - v903
    - evaluation: property-does-not-equal
      attribute: TAMVersion
      value:
      - v1005
- name: TAMVersion
  type: String
  enum:
  - default
  - v70
  - v801
  - v901
  - v903
  - v1005
  description: <p>Select the Access Manager client version to use. The default value
    is Default.</p>
  cli_alias: tam-version
- name: ConfigurationFile
  type: String
  required: true
  example: local:///tam.config
  description: Select the location of the configuration file for the Access Manager
    client. To be available for selection, files must have .conf or .cfg as their
    file extension.
  cli_alias: file
  file_locations:
  - local
  - store
  - cert
  - sharedcert
- name: ADConfigurationFile
  type: String
  description: Select the location of the configuration file for user directories.
    To be available for selection, files must have .conf or .cfg as their file extension.
  cli_alias: reg_file
  required_when:
  - evaluation: property-equals
    attribute: ADUseAD
    value:
    - 'true'
  ignored_when:
  - evaluation: logical-and
    conditions:
    - evaluation: property-does-not-equal
      attribute: TAMVersion
      value:
      - v801
    - evaluation: property-does-not-equal
      attribute: TAMVersion
      value:
      - v901
    - evaluation: property-does-not-equal
      attribute: TAMVersion
      value:
      - v903
    - evaluation: property-does-not-equal
      attribute: TAMVersion
      value:
      - v1005
    - evaluation: property-does-not-equal
      attribute: ADUseAD
      value:
      - 'true'
  file_locations:
  - local
  - store
  - cert
  - sharedcert
- name: SSLKeyFile
  type: String
  required: true
  example: cert:///ssl.key
  description: 'Select the location of the key file for TLS communication. To be available
    for selection, files must have .kdb as their file extension. Generally, these
    files are in the cert: directory or the sharedcert: directory.'
  cli_alias: ssl-key
  file_locations:
  - cert
  - sharedcert
- name: SSLKeyStashFile
  type: String
  required: true
  example: cert:///ssl.stash
  description: 'Select the location of the key stash file for TLS communication. To
    be available for selection, files must have .sth as their file extension. Generally,
    these files are in the cert: directory or the sharedcert: directory.'
  cli_alias: ssl-key-stash
  file_locations:
  - cert
  - sharedcert
- name: UseLocalMode
  type: Bool
  default: false
  required: true
  description: Select whether to create a local copy of the policy database. Set this
    property to cache the policy database locally instead of accessing the remote
    policy server. This property must match the behavior defined in the configuration
    files for the Access Manager client.
  cli_alias: use-local-mode
- name: PollInterval
  type: String
  default: default
  description: Enter the interval between requests to update the local policy database
    from the remote policy server. <ul><li><b>default</b> - Uses the default value,
    which is 600 seconds.</li><li><b>disable</b> - Disables requests to the policy
    database for requests.</li><li><i>seconds</i> - Specifies the time interval in
    seconds.</li></ul>
  cli_alias: cache-refresh-interval
  required_when:
  - evaluation: property-equals
    attribute: UseLocalMode
    value:
    - 'on'
  ignored_when:
  - evaluation: property-equals
    attribute: UseLocalMode
    value:
    - 'off'
- name: ListenMode
  type: Bool
  default: false
  description: Select whether to accept notifications to update the local policy database
    from the policy server. When you set this property, it overrides the behavior
    defined in configuration files for the Access Manager client.
  cli_alias: listen-mode
  required_when:
  - evaluation: property-equals
    attribute: UseLocalMode
    value:
    - 'on'
  ignored_when:
  - evaluation: property-equals
    attribute: UseLocalMode
    value:
    - 'off'
- name: ListenPort
  type: Int64
  description: Enter the listening port on the DataPower Gateway to receive update
    notifications from the remote policy server.
  cli_alias: listen-port
  ignored_when:
  - evaluation: logical-or
    conditions:
    - evaluation: property-equals
      attribute: ListenMode
      value:
      - 'off'
    - evaluation: property-equals
      attribute: UseLocalMode
      value:
      - 'off'
- name: ReturningUserAttributes
  type: Bool
  default: false
  description: Select whether the registry returns users attributes for successful
    authorization requests. When set, the registry returns user attributes.
  cli_alias: return-attributes
- name: LDAPUseSSL
  type: Bool
  default: false
  description: Select whether to use TLS communication between the Access Manager
    client and the LDAP or Active Directory server.
  cli_alias: use-ldap-ssl
- name: LDAPSSLPort
  type: Int64
  default: 636
  description: Enter the listening port that the LDAP server uses for TLS communication.
    This property does not apply for TLS communication with an Active Directory server.
  cli_alias: ldap-ssl-port
  ignored_when:
  - evaluation: logical-or
    conditions:
    - evaluation: property-equals
      attribute: LDAPUseSSL
      value:
      - 'off'
    - evaluation: property-equals
      attribute: ADUseAD
      value:
      - 'on'
- name: LDAPSSLKeyFile
  type: String
  description: '<p>Select the location of the key file that contains the certificates
    for TLS communication with the registry server.</p><ul><li>For server-only authentication,
    the key file must contain the signer certificate for the registry server.</li><li>For
    mutual authentication, the key file must also contain a personal certificate that
    the registry server can validate. If the personal certificate is not the default
    personal certificate in the key file, you must enter the label of the personal
    certificate.</li></ul><p>This file must be in the cert: or the sharedcert: directory.</p>'
  cli_alias: ldap-ssl-key-file
  required_when:
  - evaluation: property-equals
    attribute: LDAPUseSSL
    value:
    - 'on'
  ignored_when:
  - evaluation: logical-true
  file_locations:
  - cert
  - sharedcert
- name: LDAPSSLKeyFilePasswordAlias
  type: String
  reference_to: PasswordAlias
  description: Enter the password alias of the password for the key file that contains
    the certificates for TLS communication with the registry server.
  cli_alias: ldap-ssl-key-file-password-alias
  ignored_when:
  - evaluation: property-equals
    attribute: LDAPUseSSL
    value:
    - 'off'
- name: LDAPSSLKeyFileLabel
  type: String
  description: <p>Enter the label of the personal certificate in the key file for
    client authentication.</p><ul><li>When using mutual authentication with the registry
    server and the personal certificate is not the default personal certificate in
    the key file, enter the label of the personal certificate. The personal certificate
    allows client authentication.</li><li>For server-only authentication, do not enter
    a value.</li></ul>
  cli_alias: ldap-ssl-key-file-dn
  ignored_when:
  - evaluation: property-equals
    attribute: LDAPUseSSL
    value:
    - 'off'
- name: TAMUseFIPS
  type: Bool
  default: false
  description: Select whether the secure communication between the Access Manager
    client and the authorization server runs in FIPS mode.
  cli_alias: use-fips
- name: TAMChooseNIST
  type: String
  enum:
  - fips
  - sp800_131_transition
  - sp800_131_strict
  - suite_b_128
  - suite_b_192
  description: In FIPS mode, there is a mandatory NIST compliance level to select.
    Select a level that is compatible with the corresponding Access Manager servers
    and registry servers. Note that the NIST and NSA options are available only in
    Access Manager versions 7.0 and later.
  cli_alias: choose-nist
  ignored_when:
  - evaluation: logical-or
    conditions:
    - evaluation: property-equals
      attribute: TAMUseFIPS
      value:
      - 'off'
    - evaluation: logical-and
      conditions:
      - evaluation: property-does-not-equal
        attribute: TAMVersion
        value:
        - default
      - evaluation: property-does-not-equal
        attribute: TAMVersion
        value:
        - v70
      - evaluation: property-does-not-equal
        attribute: TAMVersion
        value:
        - v801
      - evaluation: property-does-not-equal
        attribute: TAMVersion
        value:
        - v901
      - evaluation: property-does-not-equal
        attribute: TAMVersion
        value:
        - v903
      - evaluation: property-does-not-equal
        attribute: TAMVersion
        value:
        - v1005
- name: TAMUseBasicUser
  type: Bool
  default: false
  required: true
  description: Control whether to support basic users in the client. When enabled,
    you can use LDAP user entries for authentication or authorization without importing
    them into the ISAM domain.
  cli_alias: use-basic-user
- name: UserPrincipalAttribute
  type: String
  default: uid
  description: Specify the attribute that identifies the basic user in the LDAP user
    entry. The default value is uid.
  cli_alias: user-principal-attribute
  required_when:
  - evaluation: property-equals
    attribute: TAMUseBasicUser
    value:
    - 'on'
  ignored_when:
  - evaluation: property-equals
    attribute: TAMUseBasicUser
    value:
    - 'off'
- name: UserNoDuplicates
  type: Bool
  default: true
  description: <p>Control whether to allow duplicate principals.</p><ul><li>When enabled,
    the search for basic users covers all suffixes to ensure that no users with the
    same name are found. If duplicate principals are found in this client, the system
    returns an error.</li><li>When disabled, the search for basic users ignores possible
    duplicates. By default, duplicate principals are not allowed.</li></ul>
  cli_alias: user-no-duplicates
  ignored_when:
  - evaluation: property-equals
    attribute: TAMUseBasicUser
    value:
    - 'off'
- name: UserSearchSuffixes
  type: List
  element_type: String
  description: <p>Specify the ordered list of LDAP suffixes to be searched for principals.
    When specified and suffix optimization is disabled, the suffixes are searched
    in entry order. If suffix optimization is enabled, this order is overridden by
    the suffix optimization order.</p><p>If you do not specify any suffixes, the system
    searches all available suffixes.</p>
  cli_alias: user-search-suffixes
  ignored_when:
  - evaluation: property-equals
    attribute: TAMUseBasicUser
    value:
    - 'off'
- name: UserSuffixOptimiser
  type: Bool
  default: false
  description: <p>Control whether to search the suffixes in an optimized order.</p><ul><li>When
    enabled and uplicate principals are allowed, the suffixes are searched in an optimized
    order based on hit count, with the most hit of the suffix at the head of the search
    suffix list. This can help reduce the number of suffixes searched. If duplicate
    principals are not allowed, the suffix optimization setting is disregarded and
    all suffixes are searched to check for duplicates.</li><li>When disabled, the
    search order is provided by the order that is defined by the search suffixes property.</li></ul>
  cli_alias: user-suffix-optimiser
  ignored_when:
  - evaluation: logical-or
    conditions:
    - evaluation: property-equals
      attribute: TAMUseBasicUser
      value:
      - 'off'
    - evaluation: property-equals
      attribute: UserNoDuplicates
      value:
      - 'on'
- name: TAMFedDirs
  type: List
  element_type: DmTAMFedDir
  description: Specify a list of federated directories. Each entry describes a unique
    set of LDAP suffixes and LDAP server. Federated directories define all the suffixes
    that can be searched for user identities.
  cli_alias: federated-directory
  ignored_when:
  - evaluation: logical-and
    conditions:
    - evaluation: property-does-not-equal
      attribute: TAMVersion
      value:
      - default
    - evaluation: property-does-not-equal
      attribute: TAMVersion
      value:
      - v801
    - evaluation: property-does-not-equal
      attribute: TAMVersion
      value:
      - v901
    - evaluation: property-does-not-equal
      attribute: TAMVersion
      value:
      - v903
    - evaluation: property-does-not-equal
      attribute: TAMVersion
      value:
      - v1005
- name: TAMAZReplicas
  type: List
  element_type: DmTAMAZReplica
  description: <p>Replicas indicate the network location of remote authorization servers.
    You must configure at least one replica. You can configure additional replicas
    for failover purposes.</p><p><b>Note:</b> If you uploaded a file that was created
    previously, it must define at least one replica.</p>
  cli_alias: replica
- name: TAMRASTrace
  dm_type: DmTAMRASTrace
  description: <p>Trace logging is a useful debugging tool. By default, trace logging
    is not enabled. Trace logging collects large amounts of data in a short amount
    of time and might result in a significant performance degradation. Enable trace
    logging only at the direction of IBM Support.</p><p>When enabled, the DataPower
    Gateway creates two trace files for each library. The DataPower Gateway writes
    the files cyclically. Double the size of the files to obtain the total allowable
    file size.</p>
  cli_alias: tam-ras-trace
- name: AutoRetry
  type: Bool
  default: false
  description: <p>Select whether to attempt starting the Access Manager client after
    an initial failure. The DataPower Gateway automatically attempts to start the
    client after a critical error. This property controls the behavior after the initial
    attempt to restart.</p><ul><li>When enabled, the DataPower Gateway attempts to
    start the client with the defined configuration.</li><li>When disabled, the client
    is marked as <tt>down</tt> .</li></ul><p>The default behavior is to not attempt
    to start the client after an initial failure.</p>
  cli_alias: auto-retry
- name: RetryInterval
  type: Int64
  minimum: 1
  maximum: 3600
  default: 180
  description: <p>Enter the number of seconds to wait between attempts to start the
    Access Manager client. Enter a value in the range 1 - 65535. The default value
    is 180.</p>
  cli_alias: retry-interval
  ignored_when:
  - evaluation: property-does-not-equal
    attribute: AutoRetry
    value:
    - 'on'
- name: RetryAttempts
  type: Int64
  default: 3
  description: Enter the number of attempts to perform for the Access Manager client.
    After performing these attempts and the client did not start, each additional
    attempt waits the number of seconds defined by the long interval. Enter a value
    in the range 0 - 65535. A value of 0 disables the long interval. The default value
    is 3.
  cli_alias: retry-attempts
  ignored_when:
  - evaluation: property-does-not-equal
    attribute: AutoRetry
    value:
    - 'on'
- name: LongRetryInterval
  type: Int64
  minimum: 1
  maximum: 3600
  default: 900
  description: Specifies the number of seconds to wait after reaching the number of
    retry attempts. Enter a value in the range 1 - 65535. The default value is 900.
  cli_alias: long-retry-interval
  ignored_when:
  - evaluation: property-does-not-equal
    attribute: AutoRetry
    value:
    - 'on'
