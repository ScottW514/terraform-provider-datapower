---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "datapower_slm_policy Resource - terraform-provider-datapower"
subcategory: ""
description: |-
  
---

# datapower_slm_policy (Resource)

<p>An SLM policy counts messages or measures latency for messages that match a set of select criteria and that pass through the appliance during a configured interval. The policy can take action when configured thresholds are reached.</p><p>Messages can be selected based on credential class, resource class, or both. If neither, all messages are selected.</p><p>A policy consists of one or more statements. Each statement establishes the credential class, resource class, thresholds, and actions to take when thresholds are met during an interval.</p><p>Examples:</p><ul><li>A policy that throttles all traffic that arrives at a rate faster than 1000 messages per second.</li><li>A policy that generates a log message for all messages that arrive during the last elapsed second that originated from a specific IP address and requested use of a specific resource.</li></ul>
  - CLI Alias: `slm-policy`

## Example Usage

```terraform
resource "datapower_slm_policy" "test" {
  id         = "ResTestSLMPolicy"
  app_domain = "acceptance_test"
  statement = [{
    slm_id                                          = 514
    action                                          = "notify"
    maximum_total_reporting_records                 = 5000
    maximum_resources_and_credentials_for_threshold = 5000
  }]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `app_domain` (String) The name of the application domain the object belongs to
- `id` (String) Name of the object. Must be unique among object types in application domain.

### Optional

- `api_mgmt` (Boolean)
- `dependency_actions` (Attributes List) Actions to take on other resources when operations are performed on this resource. (see [below for nested schema](#nestedatt--dependency_actions))
- `execution_policy` (String) Specify the operational behavior of the policy. The default behavior is to process all policy statements.
  - CLI Alias: `eval-method`
  - Choices: `terminate-at-first-reject`, `terminate-at-first-action`, `execute-all-statements`
  - Default value: `execute-all-statements`
- `peer_group` (String) Specify the peer group that share in load distribution of traffic that is destined for the same resources. A peer group establishes a data-sharing protocol among members where each member has the data to determine whether a threshold is reached.
  - CLI Alias: `peer-group`
  - Reference to: `datapower_peer_group:id`
- `statement` (Attributes List) Specify the policy statement that establishes criteria to select messages, to set a measurement interval, to set thresholds, and to determine the action to take when the threshold is met. A policy can have multiple statements that run in the sequence defined by the statement identifier.
  - CLI Alias: `statement` (see [below for nested schema](#nestedatt--statement))
- `user_summary` (String) Comments
  - CLI Alias: `summary`

<a id="nestedatt--dependency_actions"></a>
### Nested Schema for `dependency_actions`

Required:

- `action` (String) Action to take on target resource
- `target_domain` (String) Application domain of the target for the action
- `target_type` (String) Resource type of the target for the action

Optional:

- `on_create` (Boolean) Execute this action on the target when creating this resource.
- `on_delete` (Boolean) Execute this action on the target when deleting this resource.
- `on_update` (Boolean) Execute this action on the target when updating this resource.
- `target_id` (String) Id of the target for the action (required for all resources except `datapower_domain`)


<a id="nestedatt--statement"></a>
### Nested Schema for `statement`

Required:

- `action` (String) Specify action that defines the administrative sanction for messages that exceed the threshold.
  - Reference to: `datapower_slm_action:id`
- `slm_id` (Number) Specify the unique integer that indicates the order in which to process the statement. The policy processes statements from least to greatest. Adding a statement that duplicates the value of a previous identifier replaces the previous statement.

Optional:

- `auto_generated_by_web_gui` (Boolean) Read-only property. When enabled, the statement was created as part of a default SLM configuration.
  - Default value: `false`
- `burst_limit` (Number) Specify the maximum size of the committed burst. The default value is 0, which throttles all messages. <p>The committed burst defines how much traffic can be sent during a reporting interval. The burst size should be at least twice the value of the threshold level. If the burst limit is less than the threshold value, the algorithm acts like the greater than algorithm.</p>
  - Range: `0`-`9007199254740991`
  - Default value: `0`
  - Required When: `thresh_algorithm`=`token-bucket`
- `cred_class` (String) Specify the credential class that defines the users (credentials) to be subject to policy restrictions. Without a credential class, the appliance considers all messages as belonging to a single global user. Therefore, the statement applies to all messages that are identified as valid resources without respect to credential classification.
  - Reference to: `datapower_slm_cred_class:id`
- `maximum_resources_and_credentials_for_threshold` (Number) Specify the maximum number of combinations of credentials and resources. This property limits the number of combinations and allows the setting of a maximum memory-consumption threshold. The default value is 5000.
  - Range: `0`-`4294967295`
  - Default value: `5000`
- `maximum_total_reporting_records` (Number) Specify the total number of records for a reporting interval. A single reporting aggregation interval can contain multiple records. For example, one record per resource or credential. This property allows you to define a maximum memory-consumption threshold. The default value is 5000.
  - Range: `0`-`4294967295`
  - Default value: `5000`
- `release_threshold_level` (Number) Specify the stop point of the high-low algorithm. The stop point is the low threshold. The start point is the high threshold that is defined as the threshold level property.
  - Range: `0`-`9007199254740991`
  - Default value: `0`
  - Not Valid When: `thresh_algorithm`!=`high-low-thresholds`
- `reporting_aggregation_interval` (Number) Specify the base aggregation level in minutes for the reporting statistics. This property is independent of the threshold interval.
  - Range: `0`-`4294967295`
  - Default value: `0`
- `rsrc_class` (String) Specify the resource class that defines a resources to be subject to policy restrictions. Without a resource class, the statement applies to all messages that pass the credential classification.
  - Reference to: `datapower_slm_rsrc_class:id`
- `schedule` (String) Specify the schedule that defines the timeframe to enforce the policy.
  - Reference to: `datapower_slm_schedule:id`
- `thresh_algorithm` (String) Specify the methodology that calculates the threshold in the current interval.
  - Choices: `greater-than`, `less-than`, `token-bucket`, `high-low-thresholds`
  - Default value: `greater-than`
- `thresh_interval_length` (Number) Specify the duration in seconds of each interval. Enter a value in the range 0 - 65535. The default value is 0, which allows all messages and never triggers the threshold to enforce the action. <p>This property is not relevant when the interval type is concurrent. However, concurrent transactions can also be configured with the resource class type of concurrent transactions. In this case, if the interval type is set to fixed, but behaves as concurrent with an interval of 0 that allows all messages and never triggers the threshold to enforce the action.</p>
  - Range: `0`-`65535`
  - Default value: `0`
  - Required When: `thresh_interval_type`!=`concurrent`
- `thresh_interval_type` (String) Specify the type of intervals to measure. The default is a fixed interval.
  - Choices: `fixed`, `moving`, `concurrent`
  - Default value: `fixed`
- `threshold_level` (Number) Specify the threshold that triggers the action. The units of measure depends on the threshold type. <ul><li>If the threshold is a count, enter the aggregate count.</li><li>If the threshold is latency, enter the latency in milliseconds.</li><li>If the threshold is payload, enter the payload size in KB.</li></ul><p>The default value is 0, which has different behaviors based on algorithm, threshold type, threshold interval, and level.</p><ul><li>When algorithm type is "less than" or the threshold type is "Latency", all messages are accepted.</li><li>When threshold interval is 0, a threshold level of 0 is overridden and all messages are allowed.</li></ul>
  - Range: `0`-`9007199254740991`
  - Default value: `0`
- `threshold_type` (String) Specify the way to apply the threshold level to the monitored count or latency. For the token-bucket algorithm, latency threshold types do not apply.
  - Choices: `count-all`, `count-errors`, `latency-internal`, `latency-backend`, `latency-total`, `payload-request`, `payload-response`, `payload-total`
  - Default value: `count-all`
- `user_string` (String) Specify the string or identifier that appears in log messages for this statement.
