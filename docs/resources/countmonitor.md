---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "datapower_countmonitor Resource - terraform-provider-datapower"
subcategory: ""
description: |-
  On-Line Help for Message-Count Monitors
  CLI Alias: monitor-count
---

# datapower_countmonitor (Resource)

On-Line Help for Message-Count Monitors
  - CLI Alias: `monitor-count`

## Example Usage

```terraform
resource "datapower_countmonitor" "test" {
  id           = "ResTestCountMonitor"
  app_domain   = "acceptance_test"
  measure      = "requests"
  source       = "all"
  max_sources  = 10000
  message_type = "AccTest_MessageType"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `app_domain` (String) The name of the application domain the object belongs to
- `id` (String) Name of the object. Must be unique among object types in application domain.
- `message_type` (String) Select the message type monitored by this message-count monitor.
  - CLI Alias: `message-type`
  - Reference to: `datapower_messagetype:id`

### Optional

- `dependency_actions` (Attributes List) Actions to take on other resources when operations are performed on this resource. (see [below for nested schema](#nestedatt--dependency_actions))
- `filter` (Attributes List) Click this tab to define a message-count monitor threshold and assign an action (Message Filter Action) that is taken when the threshold is reached.
  - CLI Alias: `filter` (see [below for nested schema](#nestedatt--filter))
- `header` (String) The name of the HTTP header to read to determine the value of the source IP address.
  - CLI Alias: `header`
  - Default value: `X-Client-IP`
- `max_sources` (Number) When utilizing the each-ip aggregate addressing policy the system organizes the counts per address by the addresses most recently used. When too many distinct counts have been observed, the Addresses not seen in the longest time are discarded. This parameter specifies how many distinct addresses are tracked.
  - CLI Alias: `distinct-sources`
  - Default value: `10000`
- `measure` (String) Select the action that advances the counter. The default is Requests.
  - CLI Alias: `measure`
  - Choices: `requests`, `responses`, `xpath`, `errors`
  - Default value: `requests`
- `source` (String) Select how monitoring is applied to IP addresses. This setting is meaningful only if an associated traffic definition contains and inclusive or exclusive IP address criterion. The default is All.
  - CLI Alias: `source`
  - Choices: `all`, `each-ip`, `ip-from-header`
  - Default value: `all`
- `user_summary` (String) A Message Monitor observes traffic that is incuded by the Message Type definition (which in turn is a collection of Message Matching objects). The Monitor measures only that traffic selected by the Measure field. On the Filters page, traffic which meets the filter criteria causes the Monitor to take the corresponding action (which is defined by a Message Filter Type object).
  - CLI Alias: `summary`

<a id="nestedatt--dependency_actions"></a>
### Nested Schema for `dependency_actions`

Required:

- `action` (String) Action to take on target resource
- `target_domain` (String) Application domain of the target for the action
- `target_type` (String) Resource type of the target for the action

Optional:

- `on_create` (Boolean) Execute this action on the target when creating this resource.
- `on_delete` (Boolean) Execute this action on the target when deleting this resource.
- `on_update` (Boolean) Execute this action on the target when updating this resource.
- `target_id` (String) Id of the target for the action (required for all resources except `datapower_domain`)


<a id="nestedatt--filter"></a>
### Nested Schema for `filter`

Required:

- `action` (String) Select the monitor policy implemented by the monitor when the target message type exceeds the threshold value. This is a list of Message Filter Actions. Click the + button to create a new action.
  - Reference to: `datapower_filteraction:id`
- `burst_limit` (Number) Specify the maximum allowed message burst. Use a value approximately twice the value of Rate Limit.
- `interval` (Number) Enter the measurement interval in milliseconds. One second is expressed as 1000 here.
- `name` (String) Enter the name of the threshold. This name appears in the log files when the threshold is reached.
- `rate_limit` (Number) Specify the threshold value as a number of messages. A monitored message type that exceeds this value over the measurement interval specified by the Interval property is subject to the policy identified by the Action values list.
  - Range: `1`-`4294967295`
