---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "datapower_api_plan Resource - terraform-provider-datapower"
subcategory: ""
description: |-
  An API plan packages a list of APIs to expose. An API is not exposed unless you add the API to a plan. When you configure an API plan, define the rate limit schemes to enforce against APIs. By default, the rate limit scheme in the plan applies to all operations. You can override plan-level rate limit schemes with operation-specific rate limit schemes.
  CLI Alias: api-plan
---

# datapower_api_plan (Resource)

An API plan packages a list of APIs to expose. An API is not exposed unless you add the API to a plan. When you configure an API plan, define the rate limit schemes to enforce against APIs. By default, the rate limit scheme in the plan applies to all operations. You can override plan-level rate limit schemes with operation-specific rate limit schemes.
  - CLI Alias: `api-plan`

## Example Usage

```terraform
resource "datapower_api_plan" "test" {
  id               = "ResTestAPIPlan"
  app_domain       = "acceptance_test"
  api              = ["AccTest_APIDefinition"]
  rate_limit_scope = "per-application"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `api` (List of String) Specify the APIs to package for the plan. An API is exposed through a plan by associating the API to the plan.
  - CLI Alias: `api`
  - Reference to: `datapower_api_definition:id`
- `app_domain` (String) The name of the application domain the object belongs to
- `id` (String) Name of the object. Must be unique among object types in application domain.

### Optional

- `assembly_burst_limit` (Attributes List) Specify the burst limit scheme that the rate limit assembly action enforces. This scheme defines the maximum burst rate to allow during a specified interval. This scheme helps to prevent spikes that might damage the infrastructure. When a message arrives within an interval, the burst limit takes priority over the rate limit. In other words, a message is first checked against the burst limit scheme and then against the rate limit scheme.
  - CLI Alias: `assembly-burst-limit`
  - Not Valid When: `use_limit_definitions`=`true` (see [below for nested schema](#nestedatt--assembly_burst_limit))
- `assembly_burst_limit_definition` (Attributes List) Specify a burst limit definition that the rate limit assembly action enforces. A burst limit definition defines the maximum burst rate to allow during a specified interval. This scheme helps to prevent spikes that might damage infrastructure. When a message arrives within an interval, the burst limit takes priority over the rate limit. A message is first checked against the burst limit scheme and then against the rate limit scheme.
  - CLI Alias: `assembly-burst-limit-def`
  - Not Valid When: `use_limit_definitions`=`false` (see [below for nested schema](#nestedatt--assembly_burst_limit_definition))
- `assembly_count_limit` (Attributes List) Specify the count limit scheme that the rate limit assembly action enforces. This scheme defines the maximum count to allow and the actions to take when the limit is exceeded.
  - CLI Alias: `assembly-count-limit`
  - Not Valid When: `use_limit_definitions`=`true` (see [below for nested schema](#nestedatt--assembly_count_limit))
- `assembly_count_limit_definition` (Attributes List) Specify a count limit definition that the rate limit assembly action enforces. A count limit definition defines the maximum count that is allowed and the actions to take when the limit is exceeded.
  - CLI Alias: `assembly-count-limit-def`
  - Not Valid When: `use_limit_definitions`=`false` (see [below for nested schema](#nestedatt--assembly_count_limit_definition))
- `assembly_rate_limit` (Attributes List) Specify the rate limit scheme that the rate limit assembly action enforces. This scheme defines the maximum rate to allow during a specified interval and the actions to take when the limit is exceeded.
  - CLI Alias: `assembly-rate-limit`
  - Not Valid When: `use_limit_definitions`=`true` (see [below for nested schema](#nestedatt--assembly_rate_limit))
- `assembly_rate_limit_definition` (Attributes List) Specify a rate limit definition that the rate limit assembly action enforces. A rate limit definition defines the maximum rate that is allowed in a specified interval and the actions to take when the limit is exceeded.
  - CLI Alias: `assembly-rate-limit-def`
  - Not Valid When: `use_limit_definitions`=`false` (see [below for nested schema](#nestedatt--assembly_rate_limit_definition))
- `burst_limit` (Attributes List) Specify the burst limit scheme to enforce. This scheme defines the maximum burst rate to allow during a specified interval. The burst limit helps to prevent spikes that might damage the infrastructure. When a message arrives within an interval, the burst limit takes priority over the rate limit. In other words, a message is first checked against the burst limit scheme and then against the rate limit scheme.
  - CLI Alias: `burst-limit`
  - Not Valid When: `use_rate_limit_group`=`true` (see [below for nested schema](#nestedatt--burst_limit))
- `dependency_actions` (Attributes List) Actions to take on other resources when operations are performed on this resource. (see [below for nested schema](#nestedatt--dependency_actions))
- `exclude_operation` (List of String) Exclude operation
  - CLI Alias: `exclude`
  - Reference to: `datapower_api_operation:id`
- `graphql_schema_options` (List of String) GraphQL schema options
  - CLI Alias: `graphql-schema-options`
  - Reference to: `datapower_graphql_schema_options:id`
- `name` (String) Plan name
  - CLI Alias: `name`
- `override` (List of String) Operation rate limit
  - CLI Alias: `override`
  - Reference to: `datapower_operation_rate_limit:id`
- `product_id` (String) Specify the product ID for the plan. A product makes a set of APIs and plans into one offering to make available to API developers.
  - CLI Alias: `product-id`
- `product_name` (String) Product name
  - CLI Alias: `product-name`
- `product_title` (String) Product title
  - CLI Alias: `product-title`
- `product_version` (String) Product version
  - CLI Alias: `product-version`
  - Default value: `1.0.0`
- `rate_limit` (Attributes List) Specify the rate limit scheme to enforce. This scheme defines the maximum rate to allow during a specified interval and the actions to take when the limit is exceeded.
  - CLI Alias: `rate-limit`
  - Not Valid When: `use_rate_limit_group`=`true` (see [below for nested schema](#nestedatt--rate_limit))
- `rate_limit_group` (String) Rate limit group
  - CLI Alias: `rate-limit-group`
  - Reference to: `datapower_rate_limit_definition_group:id`
  - Not Valid When: `use_rate_limit_group`=`false`
- `rate_limit_scope` (String) Specify the scope to apply the rate limit schemes to. You can apply schemes against the application or client ID. For example, <tt>application1</tt> has <tt>client1</tt> and <tt>client2</tt> , and the rate limit is 10 calls per hour. <ul><li>When against the application, <tt>application1</tt> limits 10 calls per hour from either <tt>client1</tt> or <tt>client2.</tt></li><li>When against the client ID, <tt>application1</tt> limits 10 calls per hour from each <tt>client1</tt> and <tt>client2</tt> .</li></ul>
  - CLI Alias: `rate-limit-scope`
  - Choices: `per-application`, `per-client-id`
  - Default value: `per-application`
- `space_id` (String) Specify the space ID for the product in the catalog. When space is enabled for a catalog, the catalog can be partitioned to spaces. Spaces enable each team to manage their APIs independently.
  - CLI Alias: `space-id`
- `space_name` (String) Specify the space name for the product in the catalog. When space is enabled for a catalog, the catalog can be partitioned to spaces. Spaces enable each team to manage their APIs independently.
  - CLI Alias: `space-name`
- `use_limit_definitions` (Boolean) Use limit definitions
  - CLI Alias: `use-definitions`
  - Default value: `false`
- `use_rate_limit_group` (Boolean) Use rate limit group
  - CLI Alias: `use-rate-limit-group`
  - Default value: `false`
- `user_summary` (String) Comments
  - CLI Alias: `summary`

<a id="nestedatt--assembly_burst_limit"></a>
### Nested Schema for `assembly_burst_limit`

Required:

- `burst` (Number) Indicates the maximum allowed burst rate. The value of 0 indicates no limit. A message is rejected when the burst limit is exceeded.
- `name` (String) Indicates the name of the burst limit scheme.

Optional:

- `cache_only` (Boolean) Specifies whether to use the local cache first to enforce the burst limit. In peer group mode, using the local cache first can prevent transaction delays if communication problems arise across the peer group. However, the transaction count is less precise when this setting is enabled.
  - Default value: `true`
  - Not Valid When: `burst`=`0`
- `dynamic_value` (String) Indicates the dynamic value string for the burst limit, which should contain one or more context variables. The dynamic value makes it possible to use a context variable to enforce the burst limit based on parameters other than those defined in the burst limit scheme, such as a user name, incoming IP address, or server name. The context variable can be set in a GatewayScript action and then included in the dynamic value. <p>The following example uses the context object in a GatewayScript action to add the <tt>my.server</tt> variable to the API context.</p><p><tt>context.set("my.server", "server34")</tt></p><p>The dynamic value can then include the variable <tt>my.server</tt> , which resolves to the server name <tt>server34</tt> .</p><p>The default value is an empty string.</p>
  - Not Valid When: `burst`=`0`
- `interval` (Number) Indicates the time interval for the burst limit. Specify a value that is greater than or equal to 1. The default value is 1.
  - Range: `1`-`65535`
  - Default value: `1`
  - Not Valid When: `burst`=`0`
- `is_client` (Boolean) Indicates whether to apply the burst limit to the client or to an internal component. Client burst limits return a 429 error when exceeded. Non-client burst limits return a 503 error when exceeded. When set to <tt>off</tt> , burst limit information is not included in the response header.
  - Default value: `true`
  - Not Valid When: `burst`=`0`
- `unit` (String) Indicates the time unit for the burst limit. The default value is second.
  - Choices: `second`, `minute`
  - Default value: `second`
  - Not Valid When: `burst`=`0`
- `use_api_name` (Boolean) Indicates whether to use the API name as part of the burst limit key.
  - Default value: `false`
  - Not Valid When: `burst`=`0`
- `use_app_id` (Boolean) Indicates whether to use the application ID as part of the burst limit key.
  - Default value: `false`
  - Not Valid When: `burst`=`0`
- `use_client_id` (Boolean) Indicates whether to use the client ID as part of the burst limit key.
  - Default value: `false`
  - Not Valid When: `burst`=`0`
- `weight` (String) Specifies a JSONata expression that assigns a weight value to the transaction. For each API call, the value computed by the weight expression is applied to the burst limit. The default value is 1. If the weight expression evaluates to a value that is less than or equal to 0, it is set to 1. An empty string results in an error.
  - Default value: `1`
  - Not Valid When: `burst`=`0`


<a id="nestedatt--assembly_burst_limit_definition"></a>
### Nested Schema for `assembly_burst_limit_definition`

Required:

- `definition` (String) Specify the rate limit definition.
  - CLI Alias: `definition`
  - Reference to: `datapower_rate_limit_definition:id`
- `short_name` (String) Specify a short name for the rate limit definition.
  - CLI Alias: `name`


<a id="nestedatt--assembly_count_limit"></a>
### Nested Schema for `assembly_count_limit`

Required:

- `count` (Number) Indicates the maximum count that this limit will allow.
- `name` (String) Indicates the name of the count limit scheme.

Optional:

- `auto_dec` (Boolean) Indicates whether to automatically decrement this count limit in each transaction.
  - Default value: `true`
- `cache_only` (Boolean) Specifies whether to use the local cache first to enforce the count limit. In peer group mode, using the local cache first can prevent transaction delays if communication problems arise across the peer group. However, the transaction count is less precise when this setting is enabled.
  - Default value: `true`
- `dynamic_value` (String) Indicates the dynamic value string for the count limit, which should contain one or more context variables. The default value is an empty string.
- `hard_limit` (Boolean) <p>Indicates whether to reject requests when the specified count limit is reached.</p><ul><li>When enabled, the API Gateway rejects requests when the limit is exceeded.</li><li>When disabled, the API Gateway still handles the requests but produces a warning message.</li></ul><p>By default, the API Gateway rejects requests when the limit is exceeded.</p>
  - Default value: `true`
- `is_client` (Boolean) Indicates whether to apply the count limit to the client or to an internal component. Client count limits return a 429 error when exceeded. Non-client count limits return a 503 error when exceeded. When set to <tt>off</tt> , count limit information is not included in the response header.
  - Default value: `false`
- `use_api_name` (Boolean) Indicates whether to use the API name as part of the count limit key.
  - Default value: `false`
- `use_app_id` (Boolean) Indicates whether to use the application ID as part of the count limit key.
  - Default value: `false`
- `use_client_id` (Boolean) Indicates whether to use the client ID as part of the count limit key.
  - Default value: `false`
- `weight` (String) Specifies a JSONata expression that assigns a weight value to the transaction. For each API call, the value computed by the weight expression is applied to the count limit. The default value is 1. If the weight expression evaluates to a value that is less than or equal to 0, it is set to 1. An empty string results in an error.
  - Default value: `1`


<a id="nestedatt--assembly_count_limit_definition"></a>
### Nested Schema for `assembly_count_limit_definition`

Required:

- `definition` (String) Specify the rate limit definition.
  - CLI Alias: `definition`
  - Reference to: `datapower_rate_limit_definition:id`
- `short_name` (String) Specify a short name for the rate limit definition.
  - CLI Alias: `name`


<a id="nestedatt--assembly_rate_limit"></a>
### Nested Schema for `assembly_rate_limit`

Required:

- `name` (String) Indicates the name of the rate limit scheme.
- `rate` (Number) Indicates the maximum number of requests that the API Gateway can handle within a time interval. The value of 0 indicates no limit.
  - Range: `0`-`4294967295`

Optional:

- `cache_only` (Boolean) Specifies whether to use the local cache first to enforce the rate limit. In peer group mode, using the local cache first can prevent transaction delays if communication problems arise across the peer group. However, the transaction count is less precise when this setting is enabled.
  - Default value: `true`
  - Not Valid When: `rate`=`0`
- `dynamic_value` (String) Indicates the dynamic value string for the rate limit, which should contain one or more context variables. The dynamic value makes it possible to use a context variable to enforce the rate limit based on parameters other than those defined in the rate limit scheme, such as a user name, incoming IP address, or server name. The context variable can be set in a GatewayScript action and then included in the dynamic value. <p>The following example uses the context object in a GatewayScript action to add the <tt>my.server</tt> variable to the API context.</p><p><tt>context.set("my.server", "server34")</tt></p><p>The dynamic value can then include the variable <tt>my.server</tt> , which resolves to the server name <tt>server34</tt> .</p><p>The default value is an empty string.</p>
  - Not Valid When: `rate`=`0`
- `hard_limit` (Boolean) <p>Indicates whether to reject requests when the specified rate limit is reached.</p><ul><li>When enabled, the API Gateway rejects requests when the limit is exceeded.</li><li>When disabled, the API Gateway still handles the requests but produces a warning message.</li></ul><p>By default, the API Gateway does not reject requests when the limit is exceeded.</p>
  - Default value: `false`
  - Not Valid When: `rate`=`0`
- `interval` (Number) Indicates the time interval for the rate limit. Specify a value that is greater than or equal to 1. The default value is 1.
  - Range: `1`-`65535`
  - Default value: `1`
  - Not Valid When: `rate`=`0`
- `is_client` (Boolean) Indicates whether to apply the rate limit to the client or to an internal component. Client rate limits return a 429 error when exceeded. Non-client rate limits return a 503 error when exceeded. When set to <tt>off</tt> , rate limit information is not included in the response header.
  - Default value: `true`
  - Not Valid When: `rate`=`0`
- `unit` (String) Indicates the time unit for the rate limit. The default value is second.
  - Choices: `second`, `minute`, `hour`, `day`, `week`
  - Default value: `second`
  - Not Valid When: `rate`=`0`
- `use_api_name` (Boolean) Indicates whether to use the API name as part of the rate limit key.
  - Default value: `false`
  - Not Valid When: `rate`=`0`
- `use_app_id` (Boolean) Indicates whether to use the application ID as part of the rate limit key.
  - Default value: `false`
  - Not Valid When: `rate`=`0`
- `use_client_id` (Boolean) Indicates whether to use the client ID as part of the rate limit key.
  - Default value: `false`
  - Not Valid When: `rate`=`0`
- `weight` (String) Specifies a JSONata expression that assigns a weight value to the transaction. For each API call, the value computed by the weight expression is applied to the rate limit. The default value is 1. If the weight expression evaluates to a value that is less than or equal to 0, it is set to 1. An empty string results in an error.
  - Default value: `1`
  - Not Valid When: `rate`=`0`


<a id="nestedatt--assembly_rate_limit_definition"></a>
### Nested Schema for `assembly_rate_limit_definition`

Required:

- `definition` (String) Specify the rate limit definition.
  - CLI Alias: `definition`
  - Reference to: `datapower_rate_limit_definition:id`
- `short_name` (String) Specify a short name for the rate limit definition.
  - CLI Alias: `name`


<a id="nestedatt--burst_limit"></a>
### Nested Schema for `burst_limit`

Required:

- `burst` (Number) Indicates the maximum allowed burst rate. The value of 0 indicates no limit. A message is rejected when the burst limit is exceeded.
- `name` (String) Indicates the name of the burst limit scheme.

Optional:

- `cache_only` (Boolean) Specifies whether to use the local cache first to enforce the burst limit. In peer group mode, using the local cache first can prevent transaction delays if communication problems arise across the peer group. However, the transaction count is less precise when this setting is enabled.
  - Default value: `true`
  - Not Valid When: `burst`=`0`
- `dynamic_value` (String) Indicates the dynamic value string for the burst limit, which should contain one or more context variables. The dynamic value makes it possible to use a context variable to enforce the burst limit based on parameters other than those defined in the burst limit scheme, such as a user name, incoming IP address, or server name. The context variable can be set in a GatewayScript action and then included in the dynamic value. <p>The following example uses the context object in a GatewayScript action to add the <tt>my.server</tt> variable to the API context.</p><p><tt>context.set("my.server", "server34")</tt></p><p>The dynamic value can then include the variable <tt>my.server</tt> , which resolves to the server name <tt>server34</tt> .</p><p>The default value is an empty string.</p>
  - Not Valid When: `burst`=`0`
- `interval` (Number) Indicates the time interval for the burst limit. Specify a value that is greater than or equal to 1. The default value is 1.
  - Range: `1`-`65535`
  - Default value: `1`
  - Not Valid When: `burst`=`0`
- `is_client` (Boolean) Indicates whether to apply the burst limit to the client or to an internal component. Client burst limits return a 429 error when exceeded. Non-client burst limits return a 503 error when exceeded. When set to <tt>off</tt> , burst limit information is not included in the response header.
  - Default value: `true`
  - Not Valid When: `burst`=`0`
- `unit` (String) Indicates the time unit for the burst limit. The default value is second.
  - Choices: `second`, `minute`
  - Default value: `second`
  - Not Valid When: `burst`=`0`
- `use_api_name` (Boolean) Indicates whether to use the API name as part of the burst limit key.
  - Default value: `false`
  - Not Valid When: `burst`=`0`
- `use_app_id` (Boolean) Indicates whether to use the application ID as part of the burst limit key.
  - Default value: `false`
  - Not Valid When: `burst`=`0`
- `use_client_id` (Boolean) Indicates whether to use the client ID as part of the burst limit key.
  - Default value: `false`
  - Not Valid When: `burst`=`0`
- `weight` (String) Specifies a JSONata expression that assigns a weight value to the transaction. For each API call, the value computed by the weight expression is applied to the burst limit. The default value is 1. If the weight expression evaluates to a value that is less than or equal to 0, it is set to 1. An empty string results in an error.
  - Default value: `1`
  - Not Valid When: `burst`=`0`


<a id="nestedatt--dependency_actions"></a>
### Nested Schema for `dependency_actions`

Required:

- `action` (String) Action to take on target resource
- `target_domain` (String) Application domain of the target for the action
- `target_type` (String) Resource type of the target for the action

Optional:

- `on_create` (Boolean) Execute this action on the target when creating this resource.
- `on_delete` (Boolean) Execute this action on the target when deleting this resource.
- `on_update` (Boolean) Execute this action on the target when updating this resource.
- `target_id` (String) Id of the target for the action (required for all resources except `datapower_domain`)


<a id="nestedatt--rate_limit"></a>
### Nested Schema for `rate_limit`

Required:

- `name` (String) Indicates the name of the rate limit scheme.
- `rate` (Number) Indicates the maximum number of requests that the API Gateway can handle within a time interval. The value of 0 indicates no limit.
  - Range: `0`-`4294967295`

Optional:

- `cache_only` (Boolean) Specifies whether to use the local cache first to enforce the rate limit. In peer group mode, using the local cache first can prevent transaction delays if communication problems arise across the peer group. However, the transaction count is less precise when this setting is enabled.
  - Default value: `true`
  - Not Valid When: `rate`=`0`
- `dynamic_value` (String) Indicates the dynamic value string for the rate limit, which should contain one or more context variables. The dynamic value makes it possible to use a context variable to enforce the rate limit based on parameters other than those defined in the rate limit scheme, such as a user name, incoming IP address, or server name. The context variable can be set in a GatewayScript action and then included in the dynamic value. <p>The following example uses the context object in a GatewayScript action to add the <tt>my.server</tt> variable to the API context.</p><p><tt>context.set("my.server", "server34")</tt></p><p>The dynamic value can then include the variable <tt>my.server</tt> , which resolves to the server name <tt>server34</tt> .</p><p>The default value is an empty string.</p>
  - Not Valid When: `rate`=`0`
- `hard_limit` (Boolean) <p>Indicates whether to reject requests when the specified rate limit is reached.</p><ul><li>When enabled, the API Gateway rejects requests when the limit is exceeded.</li><li>When disabled, the API Gateway still handles the requests but produces a warning message.</li></ul><p>By default, the API Gateway does not reject requests when the limit is exceeded.</p>
  - Default value: `false`
  - Not Valid When: `rate`=`0`
- `interval` (Number) Indicates the time interval for the rate limit. Specify a value that is greater than or equal to 1. The default value is 1.
  - Range: `1`-`65535`
  - Default value: `1`
  - Not Valid When: `rate`=`0`
- `is_client` (Boolean) Indicates whether to apply the rate limit to the client or to an internal component. Client rate limits return a 429 error when exceeded. Non-client rate limits return a 503 error when exceeded. When set to <tt>off</tt> , rate limit information is not included in the response header.
  - Default value: `true`
  - Not Valid When: `rate`=`0`
- `unit` (String) Indicates the time unit for the rate limit. The default value is second.
  - Choices: `second`, `minute`, `hour`, `day`, `week`
  - Default value: `second`
  - Not Valid When: `rate`=`0`
- `use_api_name` (Boolean) Indicates whether to use the API name as part of the rate limit key.
  - Default value: `false`
  - Not Valid When: `rate`=`0`
- `use_app_id` (Boolean) Indicates whether to use the application ID as part of the rate limit key.
  - Default value: `false`
  - Not Valid When: `rate`=`0`
- `use_client_id` (Boolean) Indicates whether to use the client ID as part of the rate limit key.
  - Default value: `false`
  - Not Valid When: `rate`=`0`
- `weight` (String) Specifies a JSONata expression that assigns a weight value to the transaction. For each API call, the value computed by the weight expression is applied to the rate limit. The default value is 1. If the weight expression evaluates to a value that is less than or equal to 0, it is set to 1. An empty string results in an error.
  - Default value: `1`
  - Not Valid When: `rate`=`0`
