---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "datapower_load_balancer_group Resource - terraform-provider-datapower"
subcategory: ""
description: |-
  
---

# datapower_load_balancer_group (Resource)

<p>The DataPower device distributes traffic to members of a Load Balancer Group. These are back end servers and not additional DataPower devices. A Load Balancer Group lists members of a virtual server group and sets the algorithm for balancing them. Periodic health checks can be performed. Load Balancers may also be used to provide redundant LDAP server access.</p><p>When created, a DataPower service can use a Load Balancer Group by associating it with an XML manager that is associated with this service.</p><p>The back end destination URL is set to the name of the Load Balancer Group (example: "BackEndServers").</p>
  - CLI Alias: `loadbalancer-group`

## Example Usage

```terraform
resource "datapower_load_balancer_group" "test" {
  id            = "ResTestLoadBalancerGroup"
  app_domain    = "acceptance_test"
  algorithm     = "round-robin"
  retrieve_info = false
  damp          = 120
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `app_domain` (String) The name of the application domain the object belongs to
- `id` (String) Name of the object. Must be unique among object types in application domain.

### Optional

- `algorithm` (String) Select the algorithm to use to balance the real servers.
  - CLI Alias: `algorithm`
  - Choices: `round-robin`, `weighted-round-robin`, `hash`, `least-connections`, `first-alive`, `weighted-least-connections`
  - Default value: `round-robin`
- `application_routing` (Boolean) <p>If set to on, the load balancer group will route to the back end cluster depending on the following conditions.</p><ul><li>the application for which this request is targeted</li><li>the application status on the back end servers</li></ul><p>Application Routing is required for Application Edition (group or atomic) rollout. If you need Application Edition support, set the Update Type to Subscribe in the WebSphere Cell object.</p>
  - CLI Alias: `appl-routing`
  - Default value: `false`
- `damp` (Number) When a real server is observed to be non-functioning, it is temporarily disabled. When the damp time has elapsed, it is re-enabled. Allowable values are in the range 1 - 86400.
  - CLI Alias: `damp`
  - Range: `1`-`86400`
  - Default value: `120`
- `dependency_actions` (Attributes List) Actions to take on other resources when operations are performed on this resource. (see [below for nested schema](#nestedatt--dependency_actions))
- `lb_group_affinity_conf` (Attributes) Session affinity allows applications to maintain sessions with clients.
  - CLI Alias: `session-affinity` (see [below for nested schema](#nestedatt--lb_group_affinity_conf))
- `lb_group_checks` (Attributes) The members of a Load Balancer Group can be periodically polled to verify the health of the server. If the server is found to be unresponsive, it is removed from the list of actively available servers until the unresponsive server passes a health check.
  - CLI Alias: `health-check` (see [below for nested schema](#nestedatt--lb_group_checks))
- `lb_group_members` (Attributes List) Members
  - CLI Alias: `server` (see [below for nested schema](#nestedatt--lb_group_members))
- `masquerade_member` (Boolean) If you set this value, the host name presented to the server will be the name of the group instead of the name of the member being used for that specific transaction.
  - CLI Alias: `masquerade`
  - Default value: `false`
- `monitored_cookies` (List of String) The DataPower Gateway enforces session affinity when the application server attempts to establish session affinity using one of these cookie names.
  - CLI Alias: `monitored-cookie`
- `never_return_sick_member` (Boolean) During normal operation, when all members of the load-balancing group are down and a new request for that group is made, the first member of the group is automatically selected. If this property is turned on, no attempt will be made to connect under these circumstances.
  - CLI Alias: `giveup-when-all-members-down`
  - Default value: `false`
- `retrieve_info` (Boolean) Use this setting to control whether this Load Balancer Group has membership and weight information automatically retrieved from the work load management repository WebSphere Cell. When disabled, the static configuration is used.
  - CLI Alias: `retrieve-wlm-info`
  - Default value: `false`
- `try_every_server_before_failing` (Boolean) This property applies only when none of the group members are in the "up" state. If this value is set, every server in the group is tried before failing the connection attempt. It is a "last best-effort" attempt.
  - CLI Alias: `try-every-server`
  - Default value: `false`
- `user_summary` (String) Comments
  - CLI Alias: `summary`
- `web_sphere_cell_config` (String) If you selected 'WebSphere Cell' for Workload Management Retrieval, you need to select a WebSphere Cell object that retrieves this information. If no objects are available in the pull down, you must create one.
  - CLI Alias: `websphere-cell`
  - Reference to: `datapower_wcc_service:id`
- `wlm_group` (String) The Workload Management Group Name is used to define a group. In a WebSphere Application Server environment, the back end group is a cluster name. Once specified, the Load Balancer Group will be populated with the members and weights retrieved from the back end.
  - CLI Alias: `wlm-group`
- `wlm_retrieval` (String) Contains the back end work load management repository selection type. Select 'WebSphere Cell' if your back-end is a WebSphere Application Server (WAS) Network Deployment (ND) or WAS Virtual Enterprise (VE).
  - CLI Alias: `wlm-type`
  - Choices: `use-websphere`
  - Default value: `use-websphere`
- `wlm_transport` (String) Specify either HTTP or HTTPS for the Load Balancer Group protocol. This protocol is used to forward traffic between the DataPower Gateway and the members of the Load Balancer Group.
  - CLI Alias: `wlm-transport`
  - Choices: `http`, `https`
  - Default value: `http`

<a id="nestedatt--dependency_actions"></a>
### Nested Schema for `dependency_actions`

Required:

- `action` (String) Action to take on target resource
- `target_domain` (String) Application domain of the target for the action
- `target_type` (String) Resource type of the target for the action

Optional:

- `on_create` (Boolean) Execute this action on the target when creating this resource.
- `on_delete` (Boolean) Execute this action on the target when deleting this resource.
- `on_update` (Boolean) Execute this action on the target when updating this resource.
- `target_id` (String) Id of the target for the action (required for all resources except `datapower_domain`)


<a id="nestedatt--lb_group_affinity_conf"></a>
### Nested Schema for `lb_group_affinity_conf`

Optional:

- `affinity_mode` (String) The mode of session affinity applied to this load balancer group.
  - CLI Alias: `affinity-mode`
  - Choices: `active`, `activeConditional`
- `affinity_wlm_override` (Boolean) Overrides the WebSphere Cell Session Affinity cluster configuration with the DataPower Gateway configuration information below.
  - CLI Alias: `override-wlm-affinity`
  - Default value: `false`
- `enable_sa` (Boolean) Enables or disables session affinity operations.
  - CLI Alias: `enable-affinity`
  - Default value: `true`
- `insertion_attributes` (Attributes) Specifies the attributes to insert in the cookie in the response when active or active-conditional session affinity is required.
  - CLI Alias: `i-cookie-attributes` (see [below for nested schema](#nestedatt--lb_group_affinity_conf--insertion_attributes))
- `insertion_cookie_name` (String) Name of the cookie inserted into the response when active or active-conditional session affinity is required.
  - CLI Alias: `i-cookie-name`
  - Default value: `DPJSESSIONID`
- `insertion_domain` (String) The domain added to the insertion cookie in the response when active or active-conditional session affinity is required. The domain name cannot begin with a dot.
  - CLI Alias: `i-domain`
  - Default value: `datapower.com`
- `insertion_path` (String) The path added to the insertion cookie in the response when active or active-conditional session affinity is required.
  - CLI Alias: `i-path`
  - Default value: `/`

<a id="nestedatt--lb_group_affinity_conf--insertion_attributes"></a>
### Nested Schema for `lb_group_affinity_conf.insertion_attributes`

Optional:

- `httponly` (Boolean) HttpOnly
  - Default value: `false`
- `secure` (Boolean) Secure
  - Default value: `false`



<a id="nestedatt--lb_group_checks"></a>
### Nested Schema for `lb_group_checks`

Required:

- `ssl` (String) Type of health check to perform. In TCP mode (TCP Connection health check type), a health check is performed with a TCP connection request. In HTTP mode (Standard health check type), a health check is performed with an HTTP GET or HTTP POST.
  - CLI Alias: `type`
  - Choices: `Standard`, `LDAP`, `IMSConnect`, `TCPConnection`, `on`, `off`

Optional:

- `active` (Boolean) Enables or disables a health check. The check will not run unless enabled
  - CLI Alias: `admin-state`
  - Default value: `false`
- `enforce_timeout` (Boolean) Indicates whether the health check timeout value is used to interrupt and end a health transaction. By default, the health check timeout only compares the actual time that the request took. With the default behavior, the health check timeout is not used to interrupt the transaction.
  - CLI Alias: `enforce-timeout`
  - Default value: `false`
- `filter` (String) Enter the URL of the stylesheet that evaluates the server response using the XPath Expression entered above. The default is supplied on this DataPower device.
  - CLI Alias: `filter`
  - Default value: `store:///healthcheck.xsl`
- `frequency` (Number) Enter an integer between 5 and 86400 to indicate the number of seconds to wait between health check posts. The default is 180.
  - CLI Alias: `frequency`
  - Range: `5`-`86400`
  - Default value: `180`
- `gateway_script_checks` (Boolean) Enables or disables GatewayScript health check processing. If enabled, content of health check requests and responses can be of any type and the response evaluator will be a GatewayScript file.
  - CLI Alias: `gatewayscript-checks`
  - Default value: `false`
- `gateway_script_custom_req_method` (String) The name of the custom method to use for Standard health check requests when GatewayScript processing is enabled.
  - CLI Alias: `request-custom-method`
- `gateway_script_req_content_type` (String) Enter the content type of the Request Document for Standard health checks with GatewayScript.
  - CLI Alias: `request-content-type`
  - Default value: `application/json`
- `gateway_script_req_doc` (String) Enter the URL of the Request Document. This might be a file on the local flash filesystem (for example, local:///healthcheck.xml). This document is included in the request to the server if the POST, PUT, or Custom method is selected for Standard health checks with GatewayScript. If the HTTP method is Custom, the request document is optional.
  - CLI Alias: `request-doc`
  - Default value: `store:///healthcheck.json`
- `gateway_script_req_method` (String) The HTTP method to use for Standard health checks with GatewayScript. If Custom is selected, a custom method name must also be specified.
  - CLI Alias: `request-method`
  - Choices: `GET`, `HEAD`, `POST`, `PUT`, `Custom`
- `gateway_script_rsp_handler` (String) Enter the URL of the GatewayScript file that evaluates the server response using the Response Evaluator Metadata. The default GatewayScript file is supplied on the DataPower Gateway.
  - CLI Alias: `response-evaluator`
  - Default value: `store:///healthcheck.js`
- `gateway_script_rsp_handler_metadata` (String) Enter a string to be used by the GatewayScript Response Evaluator to help determine the state of the server's health.
  - CLI Alias: `response-evaluator-metadata`
- `independent_checks` (Boolean) Indicates whether the health checks within a Load Balancer Group run independently of one another. By default, health checks within a Load Balancer Group run sequentially. With the default behavior, if a server hangs, all the other health checks for the other members are delayed.
  - CLI Alias: `independent-checks`
  - Default value: `false`
- `input` (String) Enter the URL of the SOAP Request Document. This may be a file on the local flash filesystem (for example, local:///healthcheck.xml). This document is POSTed to the server if Send SOAP Request is on.
  - CLI Alias: `send-soap`
  - Default value: `store:///healthcheck.xml`
- `port` (Number) Enter the TCP Port number to test. The remote port and the member server health port interact differently depending on the type of the health check. <ul><li>Standard: The member server health port is used if specified. If not specified, the remote port in the load balancer group health check is used.</li><li>LDAP: The remote port in the load balancer group health check only is used. A specification of a health port for the member server is ignored.</li><li>IMS: The health port of the member only is used. The remote port in the load balancer group health check is ignored.</li></ul>
  - CLI Alias: `target-port`
  - Default value: `80`
- `post` (Boolean) When set to on, the SOAP Request Document will be submitted to the web service via an HTTP POST operation. When set to off (without a request document), an HTTP Get operation is sent. The expected response is always valid XML and it is then analyzed using the Xpath Expression to verify the state of health of the server.
  - CLI Alias: `use-soap`
  - Default value: `true`
- `ssl_client` (String) The TLS client profile to secure connections between the DataPower Gateway and its targets.
  - CLI Alias: `ssl-client`
  - Reference to: `datapower_ssl_client_profile:id`
- `ssl_client_config_type` (String) The TLS profile type to secure connections between the DataPower Gateway and its targets.
  - CLI Alias: `ssl-client-type`
  - Choices: `client`
  - Default value: `client`
- `tcp_connection_type` (String) When set to full, a TCP Connection health check will perform a complete three-way handshake to establish a connection, followed by a four-way handshake to close the connection. When set to partial, a TCP Connection health check will perform a half-open connection to check a member's health. The three-way handshake to establish a connection will not be completed for partial connection types.
  - CLI Alias: `tcp-conn-type`
  - Choices: `Full`, `Partial`
- `timeout` (Number) Enter an integer between 2 and 86400 to indicate the number of seconds to wait for a response to a health check post. The default is 10.
  - CLI Alias: `timeout`
  - Range: `2`-`86400`
  - Default value: `10`
- `uri` (String) The relative URI to test for each member of the group. XXX in http://www.foobar.com/XXX.
  - CLI Alias: `target-uri`
  - Default value: `/`
- `xpath` (String) Enter an XPath Expression that verifies the health of the server. The expression is applied to the server's response to the health check POST. If the expression is true, the server is healthy. Otherwise, the server health state is softdown until it passes a health check.
  - CLI Alias: `xpath`
  - Default value: `/`


<a id="nestedatt--lb_group_members"></a>
### Nested Schema for `lb_group_members`

Required:

- `server` (String) Specifies the host name or IP address of the real server.
  - CLI Alias: `server`

Optional:

- `activity` (String) DEPRECATED.
- `health_port` (Number) Specifies the TCP Port number to test.
- `lb_member_state` (String) Enable or Disable the Load Balancer Member. If the Administrative State is disabled, the member are not used in health or forwarding checks.
  - CLI Alias: `admin-state`
  - Choices: `enabled`, `disabled`
  - Default value: `enabled`
- `mapped_port` (Number) <p>Specifies the port on the real server. If non-zero, the associated real server is contacted on this port. Normally the real server is contacted on the same port number as that of the virtual server and this should not be set to a value other than zero. However, if you have services that run on different ports for different members of the group, you might need to define this value.</p><p>The DataPower Gateway checks this port when the health check type is IMS Connect.</p>
- `weight` (Number) <p>When balancing with Weighted Round Robin, the weight property indicates the relative priority of this server versus the other members of the group. The greater the weight indicates the higher the preference. Use an integer between 1 and 65000.</p><p>For example, assume three server pool members, A, B, and C, with assigned weights of 5, 3, and 2 respectively. As a result of this weighting, server A can expect to receive approximately 50% of client requests, server B can expect to receive approximately 30% of client requests, with server C receiving the remaining 20%.</p>
  - CLI Alias: `weight`
  - Range: `1`-`65000`
  - Default value: `1`
