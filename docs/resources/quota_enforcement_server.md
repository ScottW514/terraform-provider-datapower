---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "datapower_quota_enforcement_server Resource - terraform-provider-datapower"
subcategory: ""
description: |-
  
---

# datapower_quota_enforcement_server (Resource)

<p>On each DataPower Gateway, you configure the quota enforcement server to store the thresholds and associated metadata in memory or persist them on the RAID volume.</p><p>The quota enforcement server can work in standalone mode or peer group mode.</p><p>A peer group is collection of at least three nodes across which quota enforcement is implemented. In each peer group, one DataPower Gateway is the primary node and others are replicas. Failover might occur when the primary node becomes unavailable.</p><p>When you enable the peer group mode, the appropriate configuration properties are displayed. You must configure the connection among peers.</p><p>Based on your requirements for quota enforcement, you can enable or disable strict mode. Strict mode affects data-consistency across the peer group.</p><p>When strict mode is enabled, the following effects are caused: <ul><li>When the primary node is operational and when strict mode of all nodes in a peer group is enabled, threshold synchronization is more frequent to ensure data-consistency across the peer group. However, more network bandwidth is used. Therefore, strict mode is suitable for peers in the same data center.</li><li>When the primary node becomes unavailable, before failover occurs, the replica with enabled strict mode cannot process the request. <p>If service performance and availability are more important than data-consistency, you can disable strict mode for the replica so that this replica can process the request. The replica with disabled strict mode writes the threshold and associated metadata to the local data storage. After failover occurs, the connection is resumed between the replica and the new primary node. The threshold and associated metadata stored by the replica might be overwritten by the new primary node when the new primay node synchronizes the data to all replicas. Data-consistency might be affected across the peer group.</p></li></ul></p><p>By default, data is stored in memory and quota enforcement server works in standalone mode.</p>
  - CLI Alias: `quota-enforcement-server`

## Example Usage

```terraform
resource "datapower_quota_enforcement_server" "test" {
  server_port  = 16379
  monitor_port = 26379
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Optional

- `dependency_actions` (Attributes List) Actions to take on other resources when operations are performed on this resource. (see [below for nested schema](#nestedatt--dependency_actions))
- `enable_peer_group` (Boolean) Indicates whether the DataPower Gateway is enabled to work in peer group mode. By default, peer group mode is disabled, which indicates that the DataPower Gateway works in standalone mode.
  - CLI Alias: `enable-peer-group`
  - Default value: `false`
- `enable_ssl` (Boolean) Indicates whether TLS is used to secure connection among the peers of the peer group. By default, the TLS is enabled.
  - CLI Alias: `enable-ssl`
  - Default value: `true`
  - Not Valid When: `enable_peer_group`=`false`
- `enabled` (Boolean) <p>The administrative state of the configuration.</p><ul><li>To make active, set to enabled.</li><li>To make inactive, set to disabled.</li></ul>
  - CLI Alias: `admin-state`
  - Default value: `true`
- `ip_address` (String) <p>Indicates the IP address of the DataPower Gateway for other peers to connect to. The IP address can be the IP address on any interface of the DataPower Gateway and must be accessible by other peers in the peer group. The IP address cannot be 127.0.0.1, 0.0.0.0 or ::. This IP address uniquely identifies the DataPower Gateway.</p><p>You can use a local host alias instead of a static IP address. A host alias resolves a locally configured alias to a static IP address.</p>
  - CLI Alias: `ip-address`
  - Required When: `enable_peer_group`=`true`
  - Not Valid When: `enable_peer_group`=`false`
- `monitor_port` (Number) Indicates the listening port for operational state monitoring for the quota enforcement server. The default port is 26379.
  - CLI Alias: `monitor-port`
  - Default value: `26379`
- `password_alias` (String) Specifies the password alias to secure the data store. If not specified, a system default is used.
  - CLI Alias: `password-alias`
  - Reference to: `datapower_password_alias:id`
- `peers` (List of String) <p>Specifies peers of the DataPower Gateway in the peer group. The DataPower Gateway connects to each peer in the order in which peers are added in the list. It is not necessary to specify all peers in the Peers list.</p><ul><li>When the DataPower Gateway connects to no peer in the list, this DataPower Gateway is the first active server and joins the peer group as the primary node.</li><li>When the DataPower Gateway connects to any peer in the list, it joins the peer group as a replica.</li></ul><p>You can use a local host alias instead of a static IP address. A host alias resolves a locally configured alias to a static IP address. Aliasing can help when you move configurations among appliances.</p><p>Note: Do not specify the IP address or hostname of this DataPower Gateway.</p>
  - CLI Alias: `peer`
  - Not Valid When: `enable_peer_group`=`false`
- `priority` (Number) <p>Indicates the priority that is used to decide which replica is promoted to the primary node when failover occurs.</p><p>Enter a value in range 0 - 255. The default value is 100. The replica with the lowest priority number is promoted. A replica with the value of 0 can never be promoted.</p>
  - CLI Alias: `priority`
  - Range: `0`-`255`
  - Default value: `100`
  - Required When: `enable_peer_group`=`true`
  - Not Valid When: `enable_peer_group`=`false`
- `provider_target` (String) Target host for this resource. If not set, provider will use the top level settings.
- `raid_volume` (String) <p>Specifies whether data storage is persistent or in-memory. <ul><li>For persistent storage, select the RAID volume that must be <tt>raid0</tt> .</li><li>For in-memory storage, do not select the RAID volume.</li></ul></p>
  - CLI Alias: `raid-volume`
  - Reference to: `datapower_raid_volume:id`
- `server_port` (Number) Indicates the listening port used by the GatewayScript module to communicate with the quota enforcement server. The default port value is 16379.
  - CLI Alias: `server-port`
  - Default value: `16379`
- `ssl_crypto_certificate` (String) Indicates the certificate alias that is sent to a peer when the DataPower Gateway negotiates a TLS connection with the peer.
  - CLI Alias: `ssl-cert`
  - Reference to: `datapower_crypto_certificate:id`
  - Required When: (`enable_peer_group`=`true` AND `enable_ssl`=`true`)
  - Not Valid When: (`enable_peer_group`=`false` OR `enable_ssl`=`false`)
- `ssl_crypto_key` (String) Indicates the key alias for the DataPower Gateway to authenticate a peer of the DataPower Gateway during the TLS handshake.
  - CLI Alias: `ssl-key`
  - Reference to: `datapower_crypto_key:id`
  - Required When: (`enable_peer_group`=`true` AND `enable_ssl`=`true`)
  - Not Valid When: (`enable_peer_group`=`false` OR `enable_ssl`=`false`)
- `strict_mode` (Boolean) Based on your requirements for quota enforcement, enable or disable strict mode. By default, the strict mode is enabled.
  - CLI Alias: `strict-mode`
  - Default value: `true`
  - Not Valid When: `enable_peer_group`=`false`
- `user_summary` (String) Specifies a brief descriptive summary for the configuration.
  - CLI Alias: `summary`

<a id="nestedatt--dependency_actions"></a>
### Nested Schema for `dependency_actions`

Required:

- `action` (String) Action to take on target resource
- `target_domain` (String) Application domain of the target for the action
- `target_type` (String) Resource type of the target for the action

Optional:

- `on_create` (Boolean) Execute this action on the target when creating this resource.
- `on_delete` (Boolean) Execute this action on the target when deleting this resource.
- `on_update` (Boolean) Execute this action on the target when updating this resource.
- `target_id` (String) Id of the target for the action (required for all resources except `datapower_domain`)
