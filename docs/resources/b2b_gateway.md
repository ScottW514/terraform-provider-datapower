---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "datapower_b2b_gateway Resource - terraform-provider-datapower"
subcategory: ""
description: |-
  A B2B gateway can handle B2B messages transmitted over a variety of AS and non-AS protocols for inbound and outbound flows, as well as MDN messages.
  CLI Alias: b2bgwAccepted Dependency Actions: quiesce
---

# datapower_b2b_gateway (Resource)

A B2B gateway can handle B2B messages transmitted over a variety of AS and non-AS protocols for inbound and outbound flows, as well as MDN messages.
  - CLI Alias: `b2bgw`
  - Accepted Dependency Actions: `quiesce`

## Example Usage

```terraform
resource "datapower_b2b_gateway" "test" {
  id         = "ResTestB2BGateway"
  app_domain = "acceptance_test"
  as_front_protocol = [{
    front_protocol = "AccTest_HTTPSourceProtocolHandler"
    mdn_receiver   = false
  }]
  b2b_profiles = [{ partner_profile = "AccTest_B2BProfile" }]
  b2b_groups = [{
  }]
  document_routing_preprocessor = "store:///b2b-routing.xsl"
  archive_mode                  = "purgeonly"
  archive_backup_documents = {
  }
  xml_manager = "default"
  cpa_entries = [{
    cpa              = "AccTest_B2BCPA"
    collaboration    = "AccTest_B2BCPACollaboration"
    internal_partner = "AccTest_B2BProfile"
    external_partner = "AccTest_B2BProfile"
  }]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `app_domain` (String) The name of the application domain the object belongs to
- `id` (String) Name of the object. Must be unique among object types in application domain.

### Optional

- `archive_backup_documents` (Attributes) Specify the types of documents to archive. This property does not indicate the inbound or outbound transaction to archive.
  - CLI Alias: `arch-backup-documents` (see [below for nested schema](#nestedatt--archive_backup_documents))
- `archive_document_age` (Number) Specify the maximum duration in days to retain processed documents. Enter a value in the range 1 - 3650. The default value is 90.
  - CLI Alias: `arch-document-age`
  - Range: `1`-`3650`
  - Default value: `90`
- `archive_file_name` (String) Specify the base file name for archive file. When archiving, the operation appends the current timestamp.
  - CLI Alias: `arch-file`
  - Required When: `archive_mode`=`archpurge`
  - Not Valid When: `archive_mode`!=`archpurge`
- `archive_location` (String) Specify the location for archive file. Enter the fully qualified name of the directory. To copy the archive file to an FTP server, ensure that the FTP policies in the XML manager enable image (binary) data transfer.
  - CLI Alias: `arch-dir`
  - Required When: `archive_mode`=`archpurge`
  - Not Valid When: `archive_mode`!=`archpurge`
- `archive_minimum_documents` (Number) Specify the minimum number of documents to retain in document storage after archival. The minimum value is 1. The default value is 100.
  - CLI Alias: `arch-minimum-documents`
  - Range: `1`-`65535`
  - Default value: `100`
  - Not Valid When: `archive_mode`!=`archpurge`
- `archive_minimum_size` (Number) Specify the minimum remaining size in KB of document storage that triggers archival. The default value is 1024.
  - CLI Alias: `arch-minimum-size`
  - Default value: `1024`
  - Not Valid When: `archive_mode`!=`archpurge`
- `archive_mode` (String) Purge mode
  - CLI Alias: `arch-mode`
  - Choices: `archpurge`, `purgeonly`
  - Default value: `archpurge`
- `archive_monitor` (Boolean) Specify whether to use a monitor during archival. The monitor limits the message injection rate to prevent problems in a critical situation like performance testing or on a heavily loaded system.
  - CLI Alias: `arch-monitor`
  - Default value: `true`
- `as1_mdn_email` (String) For AS1 asynchronous MDN scenarios, specify the default email address for the AS1 asynchronous MDN. When sending outbound AS1 email messages that request an MDN, this email address can be the default email address for the response MDN. An email address in the destination overrides this value.
  - CLI Alias: `as1-mdn-email`
- `as1_mdn_smtp_server_connection` (String) When an incoming AS1 message requests an MDN as an email request, specify the SMTP server connection for asynchronous MDN responses.
  - CLI Alias: `as1-mdn-smtp-server-connection`
  - Reference to: `datapower_smtp_server_connection:id`
- `as2_mdn_url` (String) For AS2 asynchronous MDN scenarios, specify the default URL for the AS2 asynchronous MDN. This URL can point to that gateway itself or a firewall or proxy that routes the message to the gateway. A URL in the destination overrides this value.
  - CLI Alias: `as2-mdn-url`
- `as3_mdn_url` (String) For AS3 asynchronous MDN scenarios, specify the default URL for the AS3 asynchronous MDN. This URL can point to that gateway itself or a firewall or proxy that routes the message to the gateway. A URL in the destination overrides this value.
  - CLI Alias: `as3-mdn-url`
- `as_front_protocol` (Attributes List) Protocol handlers
  - CLI Alias: `as-fsph` (see [below for nested schema](#nestedatt--as_front_protocol))
- `b2b_groups` (Attributes List) Active profile groups
  - CLI Alias: `b2b-group` (see [below for nested schema](#nestedatt--b2b_groups))
- `b2b_profiles` (Attributes List) Active partner profiles
  - CLI Alias: `b2b-profile`
  - Required When: `b2b_groups`=`` (see [below for nested schema](#nestedatt--b2b_profiles))
- `cpa_entries` (Attributes List) Specify CPA entries. Each CPA entry binds an ebXML messaging service (ebMS) to provide partnership interactions between the internal and partner.
  - CLI Alias: `cpa-entry` (see [below for nested schema](#nestedatt--cpa_entries))
- `debug_history` (Number) Specify the number of transactions to capture for diagnostics. Enter a value in the range 10 - 250. The default value is 25.
  - CLI Alias: `debug-history`
  - Range: `10`-`250`
  - Default value: `25`
  - Required When: `debug_mode`=`true`
  - Not Valid When: attribute is not conditionally required
- `debug_mode` (String) Specify whether to enable diagnostics. Diagnostics are not intended for use in production environments. Diagnostics consume significant resources that can slow down processing.
  - CLI Alias: `debug-mode`
  - Choices: `on`, `off`, `unbounded`
  - Default value: `off`
- `dependency_actions` (Attributes List) Actions to take on other resources when operations are performed on this resource. (see [below for nested schema](#nestedatt--dependency_actions))
- `disk_use_check_interval` (Number) Specify the interval in minutes between checks for documents that exceed the maximum age. During the check, documents that exceed the maximum age are purged. Enter a value in the range 1 - 1440. The default value is 60.
  - CLI Alias: `diskuse-check-interval`
  - Range: `1`-`1440`
  - Default value: `60`
- `doc_store_location` (String) Specify the location for document storage, which saves copies of inbound, outbound, and intermediate documents that might be needed for a retransmit operation. If unspecified, documents are stored in the encrypted area on the RAID volume. For storage on the RAID volume, set the maximum disk usage to 30 GB.
  - CLI Alias: `doc-location`
  - Default value: `(default)`
- `document_routing_preprocessor` (String) Specify the location of the document-routing preprocessor file, which is a stylesheet or a GatewayScript file to run against transactions that cannot be handled by B2B-specific handlers. <ul><li>A stylesheet examines information from transport headers and other non-content sources to select relevant trading partners. The default stylesheet is <tt>store:///b2b-routing.xsl</tt> .</li><li>A GatewayScript examines information from transport headers and payloads to select relevant trading partners. A GatewayScript can parse messages of different data types, such as JSON, XML, and non-XML. A sample GatewayScript file is <tt>store:///gateayscript/example-b2b-routing.js</tt> .</li></ul>
  - CLI Alias: `document-routing-preprocessor`
  - Default value: `store:///b2b-routing.xsl`
- `document_routing_preprocessor_debug` (Boolean) Specify whether to enable the GatewayScript debugger to detect and diagnose errors in the document routing preprocessor file. To debug a file, ensure that the file contains one or more <tt>debugger;</tt> statements where you want to start debugging.
  - CLI Alias: `document-routing-preprocessor-debug`
  - Default value: `false`
- `document_routing_preprocessor_type` (String) Specify the file type of the document-routing preprocessor file to run against messages that are not received through AS or ebMS protocols. The default value is stylesheet.
  - CLI Alias: `document-routing-preprocessor-type`
  - Choices: `stylesheet`, `gatewayscript`
  - Default value: `stylesheet`
- `front_side_timeout` (Number) Specify the duration that a client connection can be idle before the connection is closed. For outbound transactions, this connection is between an internal application and the B2B gateway. For inbound transaction, this connection is between an external partner and a B2B gateway.
  - CLI Alias: `front-side-timeout`
  - Range: `1`-`86400`
  - Default value: `120`
- `max_document_disk_use` (Number) Specify the maximum size in KB for document storage. When storage exceeds this value, documents are purged. The default value is 25165824.
  - CLI Alias: `max-diskuse`
  - Range: `1`-`4294967295`
  - Default value: `25165824`
- `priority` (String) Specify the priority of service-scheduling. When system resources are in high demand, high priority services are favored over lower priority services.
  - CLI Alias: `priority`
  - Choices: `unknown`, `high-min`, `high`, `high-max`, `normal-min`, `normal`, `normal-max`, `low-min`, `low`, `low-max`
  - Default value: `normal`
- `shaping_threshold` (Number) Specify the maximum TPS to allow during archival. When the threshold is reached, the service queues transactions. When the queue is full, the service rejects transactions and generates a log message. Enter a value in the range 10 - 10000. The default value is 200.
  - CLI Alias: `arch-shaping-threshold`
  - Range: `10`-`10000`
  - Default value: `200`
  - Not Valid When: `archive_monitor`=`false`
- `sql_data_source` (String) SQL data source
  - CLI Alias: `sql-source`
  - Reference to: `datapower_sql_data_source:id`
- `user_summary` (String) Comments
  - CLI Alias: `summary`
- `xml_manager` (String) XML manager
  - CLI Alias: `xml-manager`
  - Reference to: `datapower_xml_manager:id`
  - Default value: `default`
- `xpath_routing_policies` (List of String) XPath routing policies
  - CLI Alias: `xpath-routing`
  - Reference to: `datapower_b2b_xpath_routing_policy:id`

<a id="nestedatt--archive_backup_documents"></a>
### Nested Schema for `archive_backup_documents`

Optional:

- `ebms3_in_message` (Boolean) ebMS3 inbound message
  - Default value: `true`
- `ebms3_in_rcpt` (Boolean) ebMS3 inbound receipt
  - Default value: `true`
- `ebms3_out_message` (Boolean) ebMS3 outbound message
  - Default value: `true`
- `ebms3_out_rcpt` (Boolean) ebMS3 outbound receipt
  - Default value: `true`
- `ebms_in_ack` (Boolean) ebMS2 inbound ACK
  - Default value: `true`
- `ebms_in_message` (Boolean) ebMS2 inbound message
  - Default value: `true`
- `ebms_out_ack` (Boolean) ebMS2 outbound ACK
  - Default value: `true`
- `ebms_out_message` (Boolean) ebMS2 outbound message
  - Default value: `true`
- `in_mdn` (Boolean) AS inbound MDN
  - Default value: `true`
- `in_message` (Boolean) AS inbound message
  - Default value: `true`
- `out_mdn` (Boolean) AS outbound MDN
  - Default value: `true`
- `out_message` (Boolean) AS outbound message
  - Default value: `true`


<a id="nestedatt--as_front_protocol"></a>
### Nested Schema for `as_front_protocol`

Required:

- `front_protocol` (String) Specify the protocol handler.
  - CLI Alias: `front-protocol`

Optional:

- `mdn_receiver` (Boolean) Specify whether to set the handler as the default MDN receiver.
  - CLI Alias: `mdn-receiver`
  - Default value: `false`


<a id="nestedatt--b2b_groups"></a>
### Nested Schema for `b2b_groups`

Optional:

- `group_enabled` (Boolean) Specify whether to enable the profile group. This setting does not modify the administrative state in the B2B partner profile group.
  - CLI Alias: `enabled`
  - Default value: `true`
- `profile_group` (String) Specify the profile group.
  - CLI Alias: `group`
  - Reference to: `datapower_b2b_profile_group:id`


<a id="nestedatt--b2b_profiles"></a>
### Nested Schema for `b2b_profiles`

Required:

- `partner_profile` (String) Specify the profile
  - CLI Alias: `profile`
  - Reference to: `datapower_b2b_profile:id`

Optional:

- `profile_dest` (String) Specify the destination for the profile. The default is <tt>default</tt> , which uses the setting in the B2B partner profile. This setting overrides the setting in the B2B partner profile. This setting does not modify the destination in the B2B partner profile.
  - CLI Alias: `destination`
  - Default value: `default`
- `profile_enabled` (Boolean) Specify whether the profile is enabled. This setting does not modify the administrative state in the B2B partner profile.
  - CLI Alias: `enabled`
  - Default value: `true`


<a id="nestedatt--cpa_entries"></a>
### Nested Schema for `cpa_entries`

Required:

- `collaboration` (String) Specify the service to attach. A service is either a business collaboration service for exchanging business messages or an MSH signal service for exchanging MSH signals including Acknowledgment, Error, StatusRequest, StatusResponse, Ping, and Pong. The value of an MSH signal service is <tt>urn:oasis:names:tc:ebxml-msg:service</tt> . Another value represents a business collaboration service.
  - CLI Alias: `collaboration`
  - Reference to: `datapower_b2b_cpa_collaboration:id`
- `cpa` (String) Specify the CPA.
  - CLI Alias: `cpa`
  - Reference to: `datapower_b2b_cpa:id`
- `external_partner` (String) Specify the external partner.
  - CLI Alias: `external-partner`
  - Reference to: `datapower_b2b_profile:id`
- `internal_partner` (String) Specify the internal partner.
  - CLI Alias: `internal-partner`
  - Reference to: `datapower_b2b_profile:id`


<a id="nestedatt--dependency_actions"></a>
### Nested Schema for `dependency_actions`

Required:

- `action` (String) Action to take on target resource
- `target_domain` (String) Application domain of the target for the action
- `target_type` (String) Resource type of the target for the action

Optional:

- `on_create` (Boolean) Execute this action on the target when creating this resource.
- `on_delete` (Boolean) Execute this action on the target when deleting this resource.
- `on_update` (Boolean) Execute this action on the target when updating this resource.
- `target_id` (String) Id of the target for the action (required for all resources except `datapower_domain`)
